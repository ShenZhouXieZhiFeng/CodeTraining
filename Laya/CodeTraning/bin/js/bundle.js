var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
Object.defineProperty(exports, "__esModule", { value: true });
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "test/TestScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = true;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var GameUI_1 = require("./script/GameUI");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        // GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);
        new GameUI_1.default();
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1,"./script/GameUI":4}],3:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var CubeController = /** @class */ (function (_super) {
    __extends(CubeController, _super);
    function CubeController() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._rotateV3 = new Laya.Vector3(0, -0.01, 0);
        return _this;
    }
    CubeController.prototype.onAwake = function () {
        this._owner = this.owner;
    };
    CubeController.prototype.onUpdate = function () {
        this._owner.transform.rotate(this._rotateV3, true);
    };
    return CubeController;
}(Laya.Script));
exports.CubeController = CubeController;
},{}],4:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var CubeController_1 = require("./CubeController");
var CustomMaterial_1 = require("./MaterialAndShader/CustomMaterial");
var GameUI = /** @class */ (function () {
    function GameUI() {
        window['gu'] = this;
        Laya.Shader3D.debugMode = true;
        //添加3D场景
        var scene = Laya.stage.addChild(new Laya.Scene3D());
        //添加照相机
        var camera = (scene.addChild(new Laya.Camera(0, 0.1, 100)));
        camera.transform.translate(new Laya.Vector3(0, 3, 3));
        camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);
        //添加方向光
        var directionLight = scene.addChild(new Laya.DirectionLight());
        directionLight.color = new Laya.Vector3(0.6, 0.6, 0.6);
        directionLight.transform.worldMatrix.setForward(new Laya.Vector3(1, -1, 0));
        //添加自定义模型
        var box = scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1, 1, 1)));
        box.transform.rotate(new Laya.Vector3(0, 45, 0), false, false);
        box.addComponent(CubeController_1.CubeController);
        // var customMaterial: CustomMaterial = new CustomMaterial();
        // box.meshRenderer.sharedMaterial = customMaterial;
        // let spMat: Laya.UnlitMaterial = new Laya.UnlitMaterial();
        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, (tex) =>
        // {
        //     spMat.albedoTexture = tex;
        // }));
        // box.meshRenderer.material = spMat;
        this.setMat(box);
        // let material: Laya.BlinnPhongMaterial = new Laya.BlinnPhongMaterial();
        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, function (tex: Laya.Texture2D)
        // {
        //     material.albedoTexture = tex;
        // }));
        // box.meshRenderer.material = material;
    }
    GameUI.prototype.setMat = function (box) {
        return __awaiter(this, void 0, void 0, function () {
            var spMat;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: 
                    // let spMat: UnlitMaterial = new UnlitMaterial();
                    // await spMat.compile();
                    // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, (tex) =>
                    // {
                    //     spMat.albedoTexture = tex;
                    // }));
                    // box.meshRenderer.material = spMat;
                    return [4 /*yield*/, CustomMaterial_1.CustomMaterial.compile()];
                    case 1:
                        // let spMat: UnlitMaterial = new UnlitMaterial();
                        // await spMat.compile();
                        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, (tex) =>
                        // {
                        //     spMat.albedoTexture = tex;
                        // }));
                        // box.meshRenderer.material = spMat;
                        _a.sent();
                        spMat = new CustomMaterial_1.CustomMaterial();
                        Laya.Texture2D.load("res/timg.jpg", Laya.Handler.create(null, function (tex) {
                            spMat.texture = tex;
                        }));
                        box.meshRenderer.material = spMat;
                        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, (tex) =>
                        // {
                        //     spMat.albedoTexture = tex;
                        // }));
                        // spMat.albedoColor = new Laya.Vector4(1, 0, 0, 1);
                        window['spMat'] = spMat;
                        return [2 /*return*/];
                }
            });
        });
    };
    return GameUI;
}());
exports.default = GameUI;
},{"./CubeController":3,"./MaterialAndShader/CustomMaterial":5}],5:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var RES_1 = require("../RES");
var CustomMaterial = /** @class */ (function (_super) {
    __extends(CustomMaterial, _super);
    function CustomMaterial() {
        var _this = _super.call(this) || this;
        _this.setShaderName(CustomMaterial.shaderName);
        _this.color = new Laya.Vector4(1, 1, 1, 1);
        return _this;
    }
    Object.defineProperty(CustomMaterial.prototype, "color", {
        set: function (color) {
            this._shaderValues.setVector(CustomMaterial.COLOR, color);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CustomMaterial.prototype, "texture", {
        set: function (value) {
            this._shaderValues.setTexture(CustomMaterial.TEXTURE, value);
        },
        enumerable: true,
        configurable: true
    });
    CustomMaterial.compile = function () {
        return __awaiter(this, void 0, void 0, function () {
            var attributeMap, uniformMap, vs, ps, customShader, subShader;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (CustomMaterial.hasInit) {
                            return [2 /*return*/];
                        }
                        CustomMaterial.hasInit = true;
                        attributeMap = {
                            'a_Position': Laya.VertexMesh.MESH_POSITION0,
                            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0
                        };
                        uniformMap = {
                            'u_MainTex': Laya.Shader3D.PERIOD_MATERIAL,
                            'u_Color': Laya.Shader3D.PERIOD_MATERIAL,
                            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE
                        };
                        return [4 /*yield*/, RES_1.RESNormal.loadRes("CustomShader/vs.glsl")];
                    case 1:
                        vs = _a.sent();
                        return [4 /*yield*/, RES_1.RESNormal.loadRes("CustomShader/ps.glsl")];
                    case 2:
                        ps = _a.sent();
                        customShader = Laya.Shader3D.add(CustomMaterial.shaderName);
                        subShader = new Laya.SubShader(attributeMap, uniformMap);
                        customShader.addSubShader(subShader);
                        subShader.addShaderPass(vs, ps);
                        return [2 /*return*/];
                }
            });
        });
    };
    CustomMaterial.hasInit = false;
    CustomMaterial.shaderName = "CustomShader";
    CustomMaterial.TEXTURE = Laya.Shader3D.propertyNameToID("u_MainTex");
    CustomMaterial.COLOR = Laya.Shader3D.propertyNameToID("u_Color");
    return CustomMaterial;
}(Laya.BaseMaterial));
exports.CustomMaterial = CustomMaterial;
},{"../RES":6}],6:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var la = Laya;
////普通资源类型////
var RES_PATH_ATLAS = "res/atlas"; //图集
var RES_PATH_IMAGE = "res/images"; //图片
var RES_PATH_CONFIG = "res/configs"; //配置文件
var RES_PATH_AUDIO = "res/sounds"; //音频,不能预先加载
var RES_PATH_VIEW = "res/view"; //导出的UI文件
var RES_PATH_ANIMATION = "res/animation"; // 动画文件
var RES_PATH_SHADER = "res/glsl"; // shader文件
////3D类型资源////
var RES_PATH_D3_SCENES = "res/d3/scenes"; //场景
var RES_PATH_D3_MODELS = "res/d3/models"; //模型
var RES_PATH_D3_OTHERS = "res/d3/others"; //其他
/**资源类型 */
var RES_TYPE;
(function (RES_TYPE) {
    RES_TYPE[RES_TYPE["normal"] = 0] = "normal";
    RES_TYPE[RES_TYPE["d3"] = 1] = "d3"; //3d资源，场景，模型等,3d资源用RES3D加载
})(RES_TYPE = exports.RES_TYPE || (exports.RES_TYPE = {}));
/**资源封装类 */
var RES = /** @class */ (function () {
    function RES() {
    }
    /**
     * 根据资源民称后缀拼接资源真实路径，资源需要按照规定位置存放
     * 参数如: 1.jpg
     */
    RES.joinResPath = function (resName) {
        // 如果已经是全路径，就不做凭拼接
        if (resName.indexOf("res/") >= 0) {
            return resName;
        }
        var path = "";
        var suffix = la.Utils.getFileExtension(resName);
        switch (suffix) {
            case "atlas":
                path = RES_PATH_ATLAS;
                // 对序列帧动画做专门处理
                if (resName.indexOf("anim") >= 0) {
                    path = RES_PATH_ANIMATION;
                }
                break;
            case "png":
            case "jpg":
            case "jpeg":
                path = RES_PATH_IMAGE;
                break;
            case "json":
            case "xml":
                path = RES_PATH_CONFIG;
                break;
            case "mp3":
            case "wav":
                path = RES_PATH_AUDIO;
                break;
            case "sk":
                path = RES_PATH_ANIMATION;
                break;
            case "scene":
                path = RES_PATH_VIEW;
                break;
            case "ls":
                path = RES_PATH_D3_SCENES;
                break;
            case "lh":
                path = RES_PATH_D3_MODELS;
                break;
            case "glsl":
                path = RES_PATH_SHADER;
                break;
            default:
                break;
        }
        var res = path + "/" + resName;
        return res;
    };
    /**
     * 获取资源的完整路径
     * @param _resName 资源局部路径
     */
    RES.getFullResPath = function (_resName) {
        return this.joinResPath(_resName);
    };
    /**
     * 获取资源，资源需要已经加载过，否则返回空
     * @param resName 资源局部路径，例如: scene1/scene1.ls
     */
    RES.getRes = function (resName) {
        var resFullName = this.joinResPath(resName);
        return this.getResByFullName(resFullName);
    };
    /**
     * 获取资源，资源需要已经加载过，否则返回空
     * @param resName 资源完整路径
     */
    RES.getResByFullName = function (resFullName) {
        var res = la.loader.getRes(resFullName);
        return res;
    };
    /**
     * 完全清除一个资源，注意：3d资源通过这个只能清除一层壳，3d资源的管理只能通过AssetRecord文件来做
     * @param resName 资源局部路径
     */
    RES.clearRes = function (resName) {
        var resFullName = this.joinResPath(resName);
        this.clearResByFullName(resFullName);
    };
    /**
     * 完全清除一个资源，注意：3d资源通过这个只能清除一层壳，3d资源的管理只能通过AssetRecord文件来做
     * @param resName 资源完整路径
     */
    RES.clearResByFullName = function (resFullName) {
        // lg.info(TG_RES, "clearResByFullName %o", resFullName);
        Laya.Loader.clearRes(resFullName);
    };
    return RES;
}());
exports.default = RES;
/**普通资源加载封装 */
var RESNormal = /** @class */ (function () {
    function RESNormal() {
    }
    /**
     * 获得一张图集中的图片,图集需要已加载过，否则回空
     * @param atlasName 图集名称
     * @param imgName 图片名称
     */
    RESNormal.getImageFromAtlas = function (atlasName, imgName) {
        var fullPath = atlasName + "/" + imgName;
        return RES.getResByFullName(fullPath);
    };
    /**
     * 加载单个资源,图集、图片、配置表等
     * @param _resName 资源局部路径，例如: bg.png
     * @param _needMgr 是否归于场景管理
     */
    RESNormal.loadRes = function (_resName, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_path;
            return __generator(this, function (_a) {
                real_path = RES.joinResPath(_resName);
                if (!real_path)
                    return [2 /*return*/, null];
                return [2 /*return*/, this.loadResByFullName(real_path)];
            });
        });
    };
    /**
     * 加载资源组
     * @param _resArr 资源组数组，每个资源都是局部路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESNormal.loadGroupAsync = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_res_arr, _i, _resArr_1, res_name, real_name;
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                real_res_arr = [];
                for (_i = 0, _resArr_1 = _resArr; _i < _resArr_1.length; _i++) {
                    res_name = _resArr_1[_i];
                    real_name = RES.joinResPath(res_name);
                    real_res_arr.push(real_name);
                }
                return [2 /*return*/, this.loadResByFullName(real_res_arr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载资源,使用完整路径
     * @param _resName 完整资源路径或资源组名
     * @param prograssFunc 进度回调，带一个参数（0-1）
     */
    RESNormal.loadResByFullName = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var prograssHandler, progress_handler;
            var _this = this;
            return __generator(this, function (_a) {
                if (!resFullName)
                    return [2 /*return*/];
                prograssHandler = null;
                progress_handler = null;
                if (prograssFunc) {
                    progress_handler = la.Handler.create(this, prograssFunc, null, false);
                }
                return [2 /*return*/, new Promise(function (resolve) {
                        la.loader.load(resFullName, la.Handler.create(_this, function (_res) {
                            // lg.info(TG_RES, "loadResFull normal over %o", resFullName);
                            resolve(_res);
                        }), progress_handler);
                    })];
            });
        });
    };
    return RESNormal;
}());
exports.RESNormal = RESNormal;
/**3d资源加载封装 */
var RESD3 = /** @class */ (function () {
    function RESD3() {
    }
    /**
     * 根据lh、ls资源名称，获取对应的AssetsRecord文件路径
     * @param resName 场景或模型资源的局部路径
     */
    RESD3.getAssetsRecord = function (resName) {
        var resFullName = RES.joinResPath(resName);
        return this.getAssetsRecordByResFullName(resFullName);
    };
    /**
     * 根据lh、ls资源名称，获取对应的AssetsRecord文件路径
     * @param resFullName 场景或模型资源的完整路径
     */
    RESD3.getAssetsRecordByResFullName = function (resFullName) {
        var num = resFullName.lastIndexOf('/');
        var parentFolder = resFullName.substr(0, num);
        var assetsRecordUrl = parentFolder + "/AssetsRecord.json";
        return assetsRecordUrl;
    };
    /**
     * 获取某个已加载过的3d物体的克隆
     * @param _resName 局部路径
     */
    RESD3.getSprited3DClone = function (resName) {
        var spriteModel = RES.getRes(resName);
        return spriteModel.clone();
    };
    /**
     * 加载3D资源,使用完整路径
     * @param resFullName 资源局部路径
     * @param prograssFunc loading函数
     */
    RESD3.loadRes = function (resName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var resFullName;
            return __generator(this, function (_a) {
                resFullName = RES.getFullResPath(resName);
                return [2 /*return*/, this.loadResByFullName(resFullName, prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源组
     * @param _resArr 资源组数组，所有资源都是局部路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESD3.loadGroupAsync = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_res_arr, _i, _resArr_2, res_name, real_name;
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                real_res_arr = [];
                for (_i = 0, _resArr_2 = _resArr; _i < _resArr_2.length; _i++) {
                    res_name = _resArr_2[_i];
                    real_name = RES.joinResPath(res_name);
                    real_res_arr.push(real_name);
                }
                return [2 /*return*/, this.loadResByFullName(real_res_arr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源组
     * @param _resArr 资源组数组，所有资源都是完整路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESD3.loadGroupAsyncByFullName = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                return [2 /*return*/, this.loadResByFullName(_resArr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源,使用完整路径
     * @param resFullName 资源完整路径
     * @param prograssFunc loading函数
     */
    RESD3.loadResByFullName = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var prograssHandler, progress_handler;
            var _this = this;
            return __generator(this, function (_a) {
                if (!resFullName)
                    return [2 /*return*/];
                prograssHandler = null;
                progress_handler = null;
                if (prograssFunc) {
                    progress_handler = la.Handler.create(this, prograssFunc, null, false);
                }
                return [2 /*return*/, new Promise(function (resolve) {
                        la.loader.create(resFullName, la.Handler.create(_this, function () {
                            // lg.info(TG_RES, "loadResByFullName 3d over %o", resFullName);
                            resolve();
                        }), progress_handler);
                    })];
            });
        });
    };
    /**
     * 加载3D资源,基于AssetsRecord加载,进度条更精细
     * @param resFullName 资源完整路径
     * @param prograssFunc loading函数
     */
    RESD3.loadResByAssetsRecord = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var arRes, arConfig, resArr, num, parentFolder, _i, arConfig_1, res;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        arRes = this.getAssetsRecordByResFullName(resFullName);
                        return [4 /*yield*/, this.loadResByFullName(arRes)];
                    case 1:
                        _a.sent();
                        arConfig = RES.getResByFullName(arRes);
                        if (!arConfig || arConfig.length <= 0) {
                            return [2 /*return*/];
                        }
                        resArr = [];
                        num = resFullName.lastIndexOf('/');
                        parentFolder = resFullName.substr(0, num) + '/';
                        for (_i = 0, arConfig_1 = arConfig; _i < arConfig_1.length; _i++) {
                            res = arConfig_1[_i];
                            resArr.push(parentFolder + res.url);
                        }
                        return [4 /*yield*/, this.loadResByFullName(resArr, prograssFunc)];
                    case 2:
                        _a.sent();
                        // 最后再加载并创建自身（ls、lh），其内部资源已经在上方加载完了
                        return [4 /*yield*/, this.loadResByFullName(resFullName)];
                    case 3:
                        // 最后再加载并创建自身（ls、lh），其内部资源已经在上方加载完了
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return RESD3;
}());
exports.RESD3 = RESD3;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NvZnQvbGF5YTIvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9zY3JpcHQvQ3ViZUNvbnRyb2xsZXIudHMiLCJzcmMvc2NyaXB0L0dhbWVVSS50cyIsInNyYy9zY3JpcHQvTWF0ZXJpYWxBbmRTaGFkZXIvQ3VzdG9tTWF0ZXJpYWwudHMiLCJzcmMvc2NyaXB0L1JFUy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBLGdHQUFnRzs7QUFFaEc7O0VBRUU7QUFDRjtJQWFJO0lBQWMsQ0FBQztJQUNSLGVBQUksR0FBWDtRQUNJLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO0lBRWpELENBQUM7SUFoQk0sZ0JBQUssR0FBUSxHQUFHLENBQUM7SUFDakIsaUJBQU0sR0FBUSxJQUFJLENBQUM7SUFDbkIsb0JBQVMsR0FBUSxZQUFZLENBQUM7SUFDOUIscUJBQVUsR0FBUSxNQUFNLENBQUM7SUFDekIsaUJBQU0sR0FBUSxLQUFLLENBQUM7SUFDcEIsaUJBQU0sR0FBUSxNQUFNLENBQUM7SUFDckIscUJBQVUsR0FBSyxzQkFBc0IsQ0FBQztJQUN0QyxvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsSUFBSSxDQUFDO0lBQ2xCLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNCLDRCQUFpQixHQUFTLElBQUksQ0FBQztJQU0xQyxpQkFBQztDQWxCRCxBQWtCQyxJQUFBO2tCQWxCb0IsVUFBVTtBQW1CL0IsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDOzs7O0FDeEJsQiwyQ0FBc0M7QUFDdEMsMENBQXFDO0FBQ3JDO0lB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QUMsWUFBWSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzt5QkFDdkM7d0JBQ0QscUJBQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsRUFBQTs7d0JBQWxELFNBQWtELENBQUM7d0JBQ25ELG1DQUFtQzt3QkFDbkMscUJBQU0sSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxFQUFBOzt3QkFEekMsbUNBQW1DO3dCQUNuQyxTQUF5QyxDQUFDOzs7OztLQUM3QztJQUVMLFlBQUM7QUFBRCxDQTFJQSxBQTBJQyxJQUFBO0FBMUlZLHNCQUFLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5cclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTY0MDtcclxuICAgIHN0YXRpYyBoZWlnaHQ6bnVtYmVyPTExMzY7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZpeGVkd2lkdGhcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cInRlc3QvVGVzdFNjZW5lLnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPXRydWU7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgZXhwb3J0U2NlbmVUb0pzb246Ym9vbGVhbj10cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBzdGF0aWMgaW5pdCgpe1xyXG4gICAgICAgIHZhciByZWc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG5cclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmltcG9ydCBHYW1lVUkgZnJvbSBcIi4vc2NyaXB0L0dhbWVVSVwiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdC8vIEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHRcdG5ldyBHYW1lVUkoKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiZXhwb3J0IGNsYXNzIEN1YmVDb250cm9sbGVyIGV4dGVuZHMgTGF5YS5TY3JpcHRcclxue1xyXG4gICAgcHJpdmF0ZSBfb3duZXI6IExheWEuU3ByaXRlM0Q7XHJcblxyXG4gICAgb25Bd2FrZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fb3duZXIgPSB0aGlzLm93bmVyIGFzIExheWEuU3ByaXRlM0Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfcm90YXRlVjMgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIC0wLjAxLCAwKTtcclxuICAgIG9uVXBkYXRlKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9vd25lci50cmFuc2Zvcm0ucm90YXRlKHRoaXMuX3JvdGF0ZVYzLCB0cnVlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IHVpIH0gZnJvbSBcIi4vLi4vdWkvbGF5YU1heFVJXCI7XHJcbmltcG9ydCBSRVMsIHsgUkVTRDMgfSBmcm9tIFwiLi9SRVNcIjtcclxuaW1wb3J0IHsgQ3ViZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9DdWJlQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBDdXN0b21NYXRlcmlhbCB9IGZyb20gXCIuL01hdGVyaWFsQW5kU2hhZGVyL0N1c3RvbU1hdGVyaWFsXCI7XHJcbmltcG9ydCB7IFVubGl0TWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbEFuZFNoYWRlci9VbmxpdE1hdGVyaWFsXCI7XHJcbmltcG9ydCB7IEhpZ2hMaWdodE1hdGVyaWFsIH0gZnJvbSBcIi4vTWF0ZXJpYWxBbmRTaGFkZXIvSGlnaExpZ2h0TWF0ZXJpYWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVVSVxyXG57XHJcbiAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgd2luZG93WydndSddID0gdGhpcztcclxuXHJcbiAgICAgICAgTGF5YS5TaGFkZXIzRC5kZWJ1Z01vZGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvL+a3u+WKoDNE5Zy65pmvXHJcbiAgICAgICAgbGV0IHNjZW5lOiBMYXlhLlNjZW5lM0QgPSBMYXlhLnN0YWdlLmFkZENoaWxkKG5ldyBMYXlhLlNjZW5lM0QoKSkgYXMgTGF5YS5TY2VuZTNEO1xyXG5cclxuICAgICAgICAvL+a3u+WKoOeFp+ebuOaculxyXG4gICAgICAgIGxldCBjYW1lcmE6IExheWEuQ2FtZXJhID0gKHNjZW5lLmFkZENoaWxkKG5ldyBMYXlhLkNhbWVyYSgwLCAwLjEsIDEwMCkpKSBhcyBMYXlhLkNhbWVyYTtcclxuICAgICAgICBjYW1lcmEudHJhbnNmb3JtLnRyYW5zbGF0ZShuZXcgTGF5YS5WZWN0b3IzKDAsIDMsIDMpKTtcclxuICAgICAgICBjYW1lcmEudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKC0zMCwgMCwgMCksIHRydWUsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgLy/mt7vliqDmlrnlkJHlhYlcclxuICAgICAgICBsZXQgZGlyZWN0aW9uTGlnaHQ6IExheWEuRGlyZWN0aW9uTGlnaHQgPSBzY2VuZS5hZGRDaGlsZChuZXcgTGF5YS5EaXJlY3Rpb25MaWdodCgpKSBhcyBMYXlhLkRpcmVjdGlvbkxpZ2h0O1xyXG4gICAgICAgIGRpcmVjdGlvbkxpZ2h0LmNvbG9yID0gbmV3IExheWEuVmVjdG9yMygwLjYsIDAuNiwgMC42KTtcclxuICAgICAgICBkaXJlY3Rpb25MaWdodC50cmFuc2Zvcm0ud29ybGRNYXRyaXguc2V0Rm9yd2FyZChuZXcgTGF5YS5WZWN0b3IzKDEsIC0xLCAwKSk7XHJcblxyXG4gICAgICAgIC8v5re75Yqg6Ieq5a6a5LmJ5qih5Z6LXHJcbiAgICAgICAgbGV0IGJveDogTGF5YS5NZXNoU3ByaXRlM0QgPSBzY2VuZS5hZGRDaGlsZChuZXcgTGF5YS5NZXNoU3ByaXRlM0QoTGF5YS5QcmltaXRpdmVNZXNoLmNyZWF0ZUJveCgxLCAxLCAxKSkpIGFzIExheWEuTWVzaFNwcml0ZTNEO1xyXG4gICAgICAgIGJveC50cmFuc2Zvcm0ucm90YXRlKG5ldyBMYXlhLlZlY3RvcjMoMCwgNDUsIDApLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIGJveC5hZGRDb21wb25lbnQoQ3ViZUNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICAvLyB2YXIgY3VzdG9tTWF0ZXJpYWw6IEN1c3RvbU1hdGVyaWFsID0gbmV3IEN1c3RvbU1hdGVyaWFsKCk7XHJcbiAgICAgICAgLy8gYm94Lm1lc2hSZW5kZXJlci5zaGFyZWRNYXRlcmlhbCA9IGN1c3RvbU1hdGVyaWFsO1xyXG5cclxuICAgICAgICAvLyBsZXQgc3BNYXQ6IExheWEuVW5saXRNYXRlcmlhbCA9IG5ldyBMYXlhLlVubGl0TWF0ZXJpYWwoKTtcclxuICAgICAgICAvLyBMYXlhLlRleHR1cmUyRC5sb2FkKFwicmVzL2xheWFib3gucG5nXCIsIExheWEuSGFuZGxlci5jcmVhdGUobnVsbCwgKHRleCkgPT5cclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIHNwTWF0LmFsYmVkb1RleHR1cmUgPSB0ZXg7XHJcbiAgICAgICAgLy8gfSkpO1xyXG4gICAgICAgIC8vIGJveC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBzcE1hdDtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRNYXQoYm94KTtcclxuXHJcbiAgICAgICAgLy8gbGV0IG1hdGVyaWFsOiBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbCA9IG5ldyBMYXlhLkJsaW5uUGhvbmdNYXRlcmlhbCgpO1xyXG4gICAgICAgIC8vIExheWEuVGV4dHVyZTJELmxvYWQoXCJyZXMvbGF5YWJveC5wbmdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZShudWxsLCBmdW5jdGlvbiAodGV4OiBMYXlhLlRleHR1cmUyRClcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIG1hdGVyaWFsLmFsYmVkb1RleHR1cmUgPSB0ZXg7XHJcbiAgICAgICAgLy8gfSkpO1xyXG4gICAgICAgIC8vIGJveC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBtYXRlcmlhbDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNldE1hdChib3gpXHJcbiAgICB7XHJcbiAgICAgICAgLy8gbGV0IHNwTWF0OiBVbmxpdE1hdGVyaWFsID0gbmV3IFVubGl0TWF0ZXJpYWwoKTtcclxuICAgICAgICAvLyBhd2FpdCBzcE1hdC5jb21waWxlKCk7XHJcbiAgICAgICAgLy8gTGF5YS5UZXh0dXJlMkQubG9hZChcInJlcy9sYXlhYm94LnBuZ1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKG51bGwsICh0ZXgpID0+XHJcbiAgICAgICAgLy8ge1xyXG4gICAgICAgIC8vICAgICBzcE1hdC5hbGJlZG9UZXh0dXJlID0gdGV4O1xyXG4gICAgICAgIC8vIH0pKTtcclxuICAgICAgICAvLyBib3gubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gc3BNYXQ7XHJcblxyXG4gICAgICAgIGF3YWl0IEN1c3RvbU1hdGVyaWFsLmNvbXBpbGUoKTtcclxuXHJcbiAgICAgICAgbGV0IHNwTWF0OiBDdXN0b21NYXRlcmlhbCA9IG5ldyBDdXN0b21NYXRlcmlhbCgpO1xyXG4gICAgICAgIExheWEuVGV4dHVyZTJELmxvYWQoXCJyZXMvdGltZy5qcGdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZShudWxsLCAodGV4KSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3BNYXQudGV4dHVyZSA9IHRleDtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgYm94Lm1lc2hSZW5kZXJlci5tYXRlcmlhbCA9IHNwTWF0O1xyXG5cclxuICAgICAgICAvLyBMYXlhLlRleHR1cmUyRC5sb2FkKFwicmVzL2xheWFib3gucG5nXCIsIExheWEuSGFuZGxlci5jcmVhdGUobnVsbCwgKHRleCkgPT5cclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIHNwTWF0LmFsYmVkb1RleHR1cmUgPSB0ZXg7XHJcbiAgICAgICAgLy8gfSkpO1xyXG4gICAgICAgIC8vIHNwTWF0LmFsYmVkb0NvbG9yID0gbmV3IExheWEuVmVjdG9yNCgxLCAwLCAwLCAxKTtcclxuXHJcblxyXG4gICAgICAgIHdpbmRvd1snc3BNYXQnXSA9IHNwTWF0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUkVTTm9ybWFsIH0gZnJvbSBcIi4uL1JFU1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEN1c3RvbU1hdGVyaWFsIGV4dGVuZHMgTGF5YS5CYXNlTWF0ZXJpYWxcclxue1xyXG4gICAgc3RhdGljIGhhc0luaXQgPSBmYWxzZTtcclxuICAgIHN0YXRpYyBzaGFkZXJOYW1lID0gXCJDdXN0b21TaGFkZXJcIjtcclxuXHJcbiAgICBzdGF0aWMgVEVYVFVSRSA9IExheWEuU2hhZGVyM0QucHJvcGVydHlOYW1lVG9JRChcInVfTWFpblRleFwiKTtcclxuICAgIHN0YXRpYyBDT0xPUiA9IExheWEuU2hhZGVyM0QucHJvcGVydHlOYW1lVG9JRChcInVfQ29sb3JcIik7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRTaGFkZXJOYW1lKEN1c3RvbU1hdGVyaWFsLnNoYWRlck5hbWUpO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KDEsIDEsIDEsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjb2xvcihjb2xvcjogTGF5YS5WZWN0b3I0KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX3NoYWRlclZhbHVlcy5zZXRWZWN0b3IoQ3VzdG9tTWF0ZXJpYWwuQ09MT1IsIGNvbG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGV4dHVyZSh2YWx1ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9zaGFkZXJWYWx1ZXMuc2V0VGV4dHVyZShDdXN0b21NYXRlcmlhbC5URVhUVVJFLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBjb21waWxlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoQ3VzdG9tTWF0ZXJpYWwuaGFzSW5pdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgQ3VzdG9tTWF0ZXJpYWwuaGFzSW5pdCA9IHRydWU7XHJcblxyXG4gICAgICAgIGxldCBhdHRyaWJ1dGVNYXA6IE9iamVjdCA9IHtcclxuICAgICAgICAgICAgJ2FfUG9zaXRpb24nOiBMYXlhLlZlcnRleE1lc2guTUVTSF9QT1NJVElPTjAsXHJcbiAgICAgICAgICAgICdhX1RleGNvb3JkMCc6IExheWEuVmVydGV4TWVzaC5NRVNIX1RFWFRVUkVDT09SRElOQVRFMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IHVuaWZvcm1NYXA6IE9iamVjdCA9IHtcclxuICAgICAgICAgICAgJ3VfTWFpblRleCc6IExheWEuU2hhZGVyM0QuUEVSSU9EX01BVEVSSUFMLFxyXG4gICAgICAgICAgICAndV9Db2xvcic6IExheWEuU2hhZGVyM0QuUEVSSU9EX01BVEVSSUFMLFxyXG4gICAgICAgICAgICAndV9NdnBNYXRyaXgnOiBMYXlhLlNoYWRlcjNELlBFUklPRF9TUFJJVEVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgdnMgPSBhd2FpdCBSRVNOb3JtYWwubG9hZFJlcyhcIkN1c3RvbVNoYWRlci92cy5nbHNsXCIpO1xyXG4gICAgICAgIGxldCBwcyA9IGF3YWl0IFJFU05vcm1hbC5sb2FkUmVzKFwiQ3VzdG9tU2hhZGVyL3BzLmdsc2xcIik7XHJcblxyXG4gICAgICAgIGxldCBjdXN0b21TaGFkZXI6IExheWEuU2hhZGVyM0QgPSBMYXlhLlNoYWRlcjNELmFkZChDdXN0b21NYXRlcmlhbC5zaGFkZXJOYW1lKTtcclxuICAgICAgICBsZXQgc3ViU2hhZGVyOiBMYXlhLlN1YlNoYWRlciA9IG5ldyBMYXlhLlN1YlNoYWRlcihhdHRyaWJ1dGVNYXAsIHVuaWZvcm1NYXApO1xyXG4gICAgICAgIGN1c3RvbVNoYWRlci5hZGRTdWJTaGFkZXIoc3ViU2hhZGVyKTtcclxuICAgICAgICBzdWJTaGFkZXIuYWRkU2hhZGVyUGFzcyh2cywgcHMpO1xyXG4gICAgfVxyXG5cclxufSIsImxldCBsYSA9IExheWE7XHJcblxyXG4vLy8v5pmu6YCa6LWE5rqQ57G75Z6LLy8vL1xyXG5jb25zdCBSRVNfUEFUSF9BVExBUzogc3RyaW5nID0gXCJyZXMvYXRsYXNcIjtcdFx0Ly/lm77pm4ZcclxuY29uc3QgUkVTX1BBVEhfSU1BR0U6IHN0cmluZyA9IFwicmVzL2ltYWdlc1wiO1x0Ly/lm77niYdcclxuY29uc3QgUkVTX1BBVEhfQ09ORklHOiBzdHJpbmcgPSBcInJlcy9jb25maWdzXCI7XHQvL+mFjee9ruaWh+S7tlxyXG5jb25zdCBSRVNfUEFUSF9BVURJTzogc3RyaW5nID0gXCJyZXMvc291bmRzXCI7ICAgXHQvL+mfs+mikSzkuI3og73pooTlhYjliqDovb1cclxuY29uc3QgUkVTX1BBVEhfVklFVzogc3RyaW5nID0gXCJyZXMvdmlld1wiOyAgICAgICAvL+WvvOWHuueahFVJ5paH5Lu2XHJcbmNvbnN0IFJFU19QQVRIX0FOSU1BVElPTjogc3RyaW5nID0gXCJyZXMvYW5pbWF0aW9uXCI7IC8vIOWKqOeUu+aWh+S7tlxyXG5jb25zdCBSRVNfUEFUSF9TSEFERVI6IHN0cmluZyA9IFwicmVzL2dsc2xcIjsgICAgIC8vIHNoYWRlcuaWh+S7tlxyXG4vLy8vM0TnsbvlnovotYTmupAvLy8vXHJcbmNvbnN0IFJFU19QQVRIX0QzX1NDRU5FUzogc3RyaW5nID0gXCJyZXMvZDMvc2NlbmVzXCI7XHQvL+WcuuaZr1xyXG5jb25zdCBSRVNfUEFUSF9EM19NT0RFTFM6IHN0cmluZyA9IFwicmVzL2QzL21vZGVsc1wiO1x0Ly/mqKHlnotcclxuY29uc3QgUkVTX1BBVEhfRDNfT1RIRVJTOiBzdHJpbmcgPSBcInJlcy9kMy9vdGhlcnNcIjtcdC8v5YW25LuWXHJcblxyXG4vKirotYTmupDnsbvlnosgKi9cclxuZXhwb3J0IGVudW0gUkVTX1RZUEVcclxue1xyXG4gICAgbm9ybWFsLFx0Ly/mma7pgJrnsbvlnovvvIzlm77pm4bvvIzlm77niYfvvIzphY3nva7mlofku7bnrYlcclxuICAgIGQzXHRcdC8vM2TotYTmupDvvIzlnLrmma/vvIzmqKHlnovnrYksM2TotYTmupDnlKhSRVMzROWKoOi9vVxyXG59XHJcblxyXG4vKirotYTmupDlsIHoo4XnsbsgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUkVTXHJcbntcclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u6LWE5rqQ5rCR56ew5ZCO57yA5ou85o6l6LWE5rqQ55yf5a6e6Lev5b6E77yM6LWE5rqQ6ZyA6KaB5oyJ54Wn6KeE5a6a5L2N572u5a2Y5pS+XHJcbiAgICAgKiDlj4LmlbDlpoI6IDEuanBnXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgam9pblJlc1BhdGgocmVzTmFtZTogc3RyaW5nKTogc3RyaW5nXHJcbiAgICB7XHJcbiAgICAgICAgLy8g5aaC5p6c5bey57uP5piv5YWo6Lev5b6E77yM5bCx5LiN5YGa5Yet5ou85o6lXHJcbiAgICAgICAgaWYgKHJlc05hbWUuaW5kZXhPZihcInJlcy9cIikgPj0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGF0aCA9IFwiXCI7XHJcbiAgICAgICAgbGV0IHN1ZmZpeCA9IGxhLlV0aWxzLmdldEZpbGVFeHRlbnNpb24ocmVzTmFtZSk7XHJcbiAgICAgICAgc3dpdGNoIChzdWZmaXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIFwiYXRsYXNcIjpcclxuICAgICAgICAgICAgICAgIHBhdGggPSBSRVNfUEFUSF9BVExBUztcclxuICAgICAgICAgICAgICAgIC8vIOWvueW6j+WIl+W4p+WKqOeUu+WBmuS4k+mXqOWkhOeQhlxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc05hbWUuaW5kZXhPZihcImFuaW1cIikgPj0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQU5JTUFUSU9OO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwbmdcIjpcclxuICAgICAgICAgICAgY2FzZSBcImpwZ1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwianBlZ1wiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX0lNQUdFO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJqc29uXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJ4bWxcIjpcclxuICAgICAgICAgICAgICAgIHBhdGggPSBSRVNfUEFUSF9DT05GSUc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1wM1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwid2F2XCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQVVESU87XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNrXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQU5JTUFUSU9OO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY2VuZVwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX1ZJRVc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxzXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfRDNfU0NFTkVTO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaFwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX0QzX01PREVMUztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZ2xzbFwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX1NIQURFUjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXMgPSBgJHtwYXRofS8ke3Jlc05hbWV9YDtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6LWE5rqQ55qE5a6M5pW06Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gX3Jlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnVsbFJlc1BhdGgoX3Jlc05hbWU6IHN0cmluZyk6IHN0cmluZ1xyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmpvaW5SZXNQYXRoKF9yZXNOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlui1hOa6kO+8jOi1hOa6kOmcgOimgeW3sue7j+WKoOi9vei/h++8jOWQpuWImei/lOWbnuepulxyXG4gICAgICogQHBhcmFtIHJlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6E77yM5L6L5aaCOiBzY2VuZTEvc2NlbmUxLmxzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmVzKHJlc05hbWU6IHN0cmluZyk6IGFueVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IHRoaXMuam9pblJlc1BhdGgocmVzTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzQnlGdWxsTmFtZShyZXNGdWxsTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5botYTmupDvvIzotYTmupDpnIDopoHlt7Lnu4/liqDovb3ov4fvvIzlkKbliJnov5Tlm57nqbpcclxuICAgICAqIEBwYXJhbSByZXNOYW1lIOi1hOa6kOWujOaVtOi3r+W+hFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBsZXQgcmVzID0gbGEubG9hZGVyLmdldFJlcyhyZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWujOWFqOa4hemZpOS4gOS4qui1hOa6kO+8jOazqOaEj++8mjNk6LWE5rqQ6YCa6L+H6L+Z5Liq5Y+q6IO95riF6Zmk5LiA5bGC5aOz77yMM2TotYTmupDnmoTnrqHnkIblj6rog73pgJrov4dBc3NldFJlY29yZOaWh+S7tuadpeWBmlxyXG4gICAgICogQHBhcmFtIHJlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXJSZXMocmVzTmFtZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IHRoaXMuam9pblJlc1BhdGgocmVzTmFtZSk7XHJcbiAgICAgICAgdGhpcy5jbGVhclJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a6M5YWo5riF6Zmk5LiA5Liq6LWE5rqQ77yM5rOo5oSP77yaM2TotYTmupDpgJrov4fov5nkuKrlj6rog73muIXpmaTkuIDlsYLlo7PvvIwzZOi1hOa6kOeahOeuoeeQhuWPquiDvemAmui/h0Fzc2V0UmVjb3Jk5paH5Lu25p2l5YGaXHJcbiAgICAgKiBAcGFyYW0gcmVzTmFtZSDotYTmupDlrozmlbTot6/lvoRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGVhclJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJjbGVhclJlc0J5RnVsbE5hbWUgJW9cIiwgcmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIExheWEuTG9hZGVyLmNsZWFyUmVzKHJlc0Z1bGxOYW1lKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKuaZrumAmui1hOa6kOWKoOi9veWwgeijhSAqL1xyXG5leHBvcnQgY2xhc3MgUkVTTm9ybWFsXHJcbntcclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5LiA5byg5Zu+6ZuG5Lit55qE5Zu+54mHLOWbvumbhumcgOimgeW3suWKoOi9vei/h++8jOWQpuWImeWbnuepulxyXG4gICAgICogQHBhcmFtIGF0bGFzTmFtZSDlm77pm4blkI3np7BcclxuICAgICAqIEBwYXJhbSBpbWdOYW1lIOWbvueJh+WQjeensFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEltYWdlRnJvbUF0bGFzKGF0bGFzTmFtZTogc3RyaW5nLCBpbWdOYW1lOiBzdHJpbmcpOiBsYXlhLnJlc291cmNlLlRleHR1cmVcclxuICAgIHtcclxuICAgICAgICBsZXQgZnVsbFBhdGggPSBgJHthdGxhc05hbWV9LyR7aW1nTmFtZX1gO1xyXG4gICAgICAgIHJldHVybiBSRVMuZ2V0UmVzQnlGdWxsTmFtZShmdWxsUGF0aCkgYXMgbGF5YS5yZXNvdXJjZS5UZXh0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L295Y2V5Liq6LWE5rqQLOWbvumbhuOAgeWbvueJh+OAgemFjee9ruihqOetiVxyXG4gICAgICogQHBhcmFtIF9yZXNOYW1lIOi1hOa6kOWxgOmDqOi3r+W+hO+8jOS+i+WmgjogYmcucG5nXHJcbiAgICAgKiBAcGFyYW0gX25lZWRNZ3Ig5piv5ZCm5b2S5LqO5Zy65pmv566h55CGXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlcyhfcmVzTmFtZTogc3RyaW5nLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGxldCByZWFsX3BhdGggPSBSRVMuam9pblJlc1BhdGgoX3Jlc05hbWUpO1xyXG4gICAgICAgIGlmICghcmVhbF9wYXRoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZWFsX3BhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L296LWE5rqQ57uEXHJcbiAgICAgKiBAcGFyYW0gX3Jlc0FyciDotYTmupDnu4TmlbDnu4TvvIzmr4/kuKrotYTmupDpg73mmK/lsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcHJvZ3Jhc3NGdW5jIOi/m+W6puWbnuiwg++8jOW4puS4gOS4quWPguaVsO+8iDAtMe+8iVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRHcm91cEFzeW5jKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8Ym9vbGVhbj5cclxuICAgIHtcclxuICAgICAgICBpZiAoIV9yZXNBcnIgfHwgX3Jlc0Fyci5sZW5ndGggPD0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlYWxfcmVzX2FyciA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHJlc19uYW1lIG9mIF9yZXNBcnIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcmVhbF9uYW1lID0gUkVTLmpvaW5SZXNQYXRoKHJlc19uYW1lKTtcclxuICAgICAgICAgICAgcmVhbF9yZXNfYXJyLnB1c2gocmVhbF9uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFJlc0J5RnVsbE5hbWUocmVhbF9yZXNfYXJyLCBfcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vei1hOa6kCzkvb/nlKjlrozmlbTot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcmVzTmFtZSDlrozmlbTotYTmupDot6/lvoTmiJbotYTmupDnu4TlkI1cclxuICAgICAqIEBwYXJhbSBwcm9ncmFzc0Z1bmMg6L+b5bqm5Zue6LCD77yM5bim5LiA5Liq5Y+C5pWw77yIMC0x77yJXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IGFueSwgcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghcmVzRnVsbE5hbWUpIHJldHVybjtcclxuICAgICAgICBsZXQgcHJvZ3Jhc3NIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJsb2FkUmVzRnVsbCBub3JtYWwgJW9cIiwgcmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIGxldCBwcm9ncmVzc19oYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvZ3Jhc3NGdW5jKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlciA9IGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHByb2dyYXNzRnVuYywgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYS5sb2FkZXIubG9hZFxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgcmVzRnVsbE5hbWUsXHJcbiAgICAgICAgICAgICAgICBsYS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCAoX3JlcykgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJsb2FkUmVzRnVsbCBub3JtYWwgb3ZlciAlb1wiLCByZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfcmVzKTtcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKjNk6LWE5rqQ5Yqg6L295bCB6KOFICovXHJcbmV4cG9ydCBjbGFzcyBSRVNEM1xyXG57XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5saOOAgWxz6LWE5rqQ5ZCN56ew77yM6I635Y+W5a+55bqU55qEQXNzZXRzUmVjb3Jk5paH5Lu26Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gcmVzTmFtZSDlnLrmma/miJbmqKHlnovotYTmupDnmoTlsYDpg6jot6/lvoRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRBc3NldHNSZWNvcmQocmVzTmFtZTogc3RyaW5nKTogc3RyaW5nXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlc0Z1bGxOYW1lID0gUkVTLmpvaW5SZXNQYXRoKHJlc05hbWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2ubGjjgIFsc+i1hOa6kOWQjeensO+8jOiOt+WPluWvueW6lOeahEFzc2V0c1JlY29yZOaWh+S7tui3r+W+hFxyXG4gICAgICogQHBhcmFtIHJlc0Z1bGxOYW1lIOWcuuaZr+aIluaooeWei+i1hOa6kOeahOWujOaVtOi3r+W+hFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZyk6IHN0cmluZ1xyXG4gICAge1xyXG4gICAgICAgIGxldCBudW0gPSByZXNGdWxsTmFtZS5sYXN0SW5kZXhPZignLycpO1xyXG4gICAgICAgIGxldCBwYXJlbnRGb2xkZXIgPSByZXNGdWxsTmFtZS5zdWJzdHIoMCwgbnVtKTtcclxuICAgICAgICBsZXQgYXNzZXRzUmVjb3JkVXJsID0gYCR7cGFyZW50Rm9sZGVyfS9Bc3NldHNSZWNvcmQuanNvbmA7XHJcbiAgICAgICAgcmV0dXJuIGFzc2V0c1JlY29yZFVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluafkOS4quW3suWKoOi9vei/h+eahDNk54mp5L2T55qE5YWL6ZqGXHJcbiAgICAgKiBAcGFyYW0gX3Jlc05hbWUg5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0U3ByaXRlZDNEQ2xvbmUocmVzTmFtZSk6IExheWEuU3ByaXRlM0RcclxuICAgIHtcclxuICAgICAgICBsZXQgc3ByaXRlTW9kZWw6IExheWEuU3ByaXRlM0QgPSBSRVMuZ2V0UmVzKHJlc05hbWUpIGFzIExheWEuU3ByaXRlM0Q7XHJcbiAgICAgICAgcmV0dXJuIHNwcml0ZU1vZGVsLmNsb25lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb0zROi1hOa6kCzkvb/nlKjlrozmlbTot6/lvoRcclxuICAgICAqIEBwYXJhbSByZXNGdWxsTmFtZSDotYTmupDlsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBwcm9ncmFzc0Z1bmMgbG9hZGluZ+WHveaVsFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRSZXMocmVzTmFtZTogc3RyaW5nLCBwcm9ncmFzc0Z1bmM6IEZ1bmN0aW9uID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IFJFUy5nZXRGdWxsUmVzUGF0aChyZXNOYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZXNGdWxsTmFtZSwgcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vTNE6LWE5rqQ57uEXHJcbiAgICAgKiBAcGFyYW0gX3Jlc0FyciDotYTmupDnu4TmlbDnu4TvvIzmiYDmnInotYTmupDpg73mmK/lsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcHJvZ3Jhc3NGdW5jIOi/m+W6puWbnuiwg++8jOW4puS4gOS4quWPguaVsO+8iDAtMe+8iVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRHcm91cEFzeW5jKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghX3Jlc0FyciB8fCBfcmVzQXJyLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVhbF9yZXNfYXJyID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcmVzX25hbWUgb2YgX3Jlc0FycilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCByZWFsX25hbWUgPSBSRVMuam9pblJlc1BhdGgocmVzX25hbWUpO1xyXG4gICAgICAgICAgICByZWFsX3Jlc19hcnIucHVzaChyZWFsX25hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZWFsX3Jlc19hcnIsIF9wcm9ncmFzc0Z1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L29M0TotYTmupDnu4RcclxuICAgICAqIEBwYXJhbSBfcmVzQXJyIOi1hOa6kOe7hOaVsOe7hO+8jOaJgOaciei1hOa6kOmDveaYr+WujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIF9wcm9ncmFzc0Z1bmMg6L+b5bqm5Zue6LCD77yM5bim5LiA5Liq5Y+C5pWw77yIMC0x77yJXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZEdyb3VwQXN5bmNCeUZ1bGxOYW1lKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghX3Jlc0FyciB8fCBfcmVzQXJyLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShfcmVzQXJyLCBfcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vTNE6LWE5rqQLOS9v+eUqOWujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIHJlc0Z1bGxOYW1lIOi1hOa6kOWujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIHByb2dyYXNzRnVuYyBsb2FkaW5n5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IGFueSwgcHJvZ3Jhc3NGdW5jOiBGdW5jdGlvbiA9IG51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCFyZXNGdWxsTmFtZSkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBwcm9ncmFzc0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIGxnLmluZm8oVEdfUkVTLCBcImxvYWRSZXNCeUZ1bGxOYW1lIDNkIGJlZ2luICVvXCIsIHJlc0Z1bGxOYW1lKTtcclxuICAgICAgICBsZXQgcHJvZ3Jlc3NfaGFuZGxlcjogTGF5YS5IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvZ3Jhc3NGdW5jKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlciA9IGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHByb2dyYXNzRnVuYywgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYS5sb2FkZXIuY3JlYXRlXHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICByZXNGdWxsTmFtZSxcclxuICAgICAgICAgICAgICAgIGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsICgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGcuaW5mbyhUR19SRVMsIFwibG9hZFJlc0J5RnVsbE5hbWUgM2Qgb3ZlciAlb1wiLCByZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc19oYW5kbGVyXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb0zROi1hOa6kCzln7rkuo5Bc3NldHNSZWNvcmTliqDovb0s6L+b5bqm5p2h5pu057K+57uGXHJcbiAgICAgKiBAcGFyYW0gcmVzRnVsbE5hbWUg6LWE5rqQ5a6M5pW06Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gcHJvZ3Jhc3NGdW5jIGxvYWRpbmflh73mlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkUmVzQnlBc3NldHNSZWNvcmQocmVzRnVsbE5hbWU6IHN0cmluZywgcHJvZ3Jhc3NGdW5jOiBGdW5jdGlvbiA9IG51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgLy8gLiDliqDovb1Bc3NldHNSZWNvcmTmlofku7bvvIzovoPlsI/vvIzkuI3orqHlhaXov5vluqblgLxcclxuICAgICAgICBsZXQgYXJSZXMgPSB0aGlzLmdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFJlc0J5RnVsbE5hbWUoYXJSZXMpO1xyXG4gICAgICAgIGxldCBhckNvbmZpZyA9IFJFUy5nZXRSZXNCeUZ1bGxOYW1lKGFyUmVzKTtcclxuICAgICAgICBpZiAoIWFyQ29uZmlnIHx8IGFyQ29uZmlnLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAuIOe7hOe7h+imgeWKoOi9veeahOi1hOa6kOaWh+S7tlxyXG4gICAgICAgIGxldCByZXNBcnIgPSBbXTtcclxuICAgICAgICBsZXQgbnVtID0gcmVzRnVsbE5hbWUubGFzdEluZGV4T2YoJy8nKTtcclxuICAgICAgICBsZXQgcGFyZW50Rm9sZGVyID0gcmVzRnVsbE5hbWUuc3Vic3RyKDAsIG51bSkgKyAnLyc7XHJcbiAgICAgICAgZm9yIChsZXQgcmVzIG9mIGFyQ29uZmlnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzQXJyLnB1c2gocGFyZW50Rm9sZGVyICsgcmVzLnVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFJlc0J5RnVsbE5hbWUocmVzQXJyLCBwcm9ncmFzc0Z1bmMpO1xyXG4gICAgICAgIC8vIOacgOWQjuWGjeWKoOi9veW5tuWIm+W7uuiHqui6q++8iGxz44CBbGjvvInvvIzlhbblhoXpg6jotYTmupDlt7Lnu4/lnKjkuIrmlrnliqDovb3lrozkuoZcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRSZXNCeUZ1bGxOYW1lKHJlc0Z1bGxOYW1lKTtcclxuICAgIH1cclxuXHJcbn0iXX0=
