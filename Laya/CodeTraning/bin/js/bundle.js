var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
Object.defineProperty(exports, "__esModule", { value: true });
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "test/TestScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = true;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var GameUI_1 = require("./script/GameUI");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        // GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);
        new GameUI_1.default();
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1,"./script/GameUI":4}],3:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var CubeController = /** @class */ (function (_super) {
    __extends(CubeController, _super);
    function CubeController() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._rotateV3 = new Laya.Vector3(0, -0.01, 0);
        return _this;
    }
    CubeController.prototype.onAwake = function () {
        this._owner = this.owner;
    };
    CubeController.prototype.onUpdate = function () {
        this._owner.transform.rotate(this._rotateV3, true);
    };
    return CubeController;
}(Laya.Script));
exports.CubeController = CubeController;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var CubeController_1 = require("./CubeController");
var UnlitMaterial_1 = require("./MaterialAndShader/UnlitMaterial");
var GameUI = /** @class */ (function () {
    function GameUI() {
        window['gu'] = this;
        Laya.Shader3D.debugMode = true;
        //添加3D场景
        var scene = Laya.stage.addChild(new Laya.Scene3D());
        //添加照相机
        var camera = (scene.addChild(new Laya.Camera(0, 0.1, 100)));
        camera.transform.translate(new Laya.Vector3(0, 3, 3));
        camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);
        //添加方向光
        var directionLight = scene.addChild(new Laya.DirectionLight());
        directionLight.color = new Laya.Vector3(0.6, 0.6, 0.6);
        directionLight.transform.worldMatrix.setForward(new Laya.Vector3(1, -1, 0));
        //添加自定义模型
        var box = scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1, 1, 1)));
        box.transform.rotate(new Laya.Vector3(0, 45, 0), false, false);
        box.addComponent(CubeController_1.CubeController);
        // var customMaterial: CustomMaterial = new CustomMaterial();
        // box.meshRenderer.sharedMaterial = customMaterial;
        // let spMat: Laya.UnlitMaterial = new Laya.UnlitMaterial();
        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, (tex) =>
        // {
        //     spMat.albedoTexture = tex;
        // }));
        // box.meshRenderer.material = spMat;
        var spMat = new UnlitMaterial_1.UnlitMaterial();
        Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, function (tex) {
            spMat.albedoTexture = tex;
        }));
        box.meshRenderer.material = spMat;
        // let material: Laya.BlinnPhongMaterial = new Laya.BlinnPhongMaterial();
        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, function (tex: Laya.Texture2D)
        // {
        //     material.albedoTexture = tex;
        // }));
        // box.meshRenderer.material = material;
    }
    return GameUI;
}());
exports.default = GameUI;
},{"./CubeController":3,"./MaterialAndShader/UnlitMaterial":5}],5:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var UnlitMaterial = /** @class */ (function (_super) {
    __extends(UnlitMaterial, _super);
    function UnlitMaterial() {
        var _this = _super.call(this) || this;
        _this._albedoIntensity = 1.0;
        _this._enableVertexColor = false;
        _this._albedoColor = new Laya.Vector4(1, 1, 1, 1);
        _this._alphaTest = true;
        UnlitMaterial.initShader();
        _this.setShaderName(UnlitMaterial.shaderName);
        _this._shaderValues.setVector(UnlitMaterial.ALBEDOCOLOR, new Laya.Vector4(1, 1, 1, 1));
        return _this;
    }
    Object.defineProperty(UnlitMaterial.prototype, "alphaTest", {
        get: function () {
            return this._alphaTest;
        },
        set: function (value) {
            this._alphaTest = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UnlitMaterial.prototype, "albedoColor", {
        get: function () {
            return this._albedoColor;
        },
        set: function (value) {
            this._albedoColor = value;
            this._shaderValues.setVector(UnlitMaterial.ALBEDOCOLOR, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(UnlitMaterial.prototype, "albedoTexture", {
        get: function () {
            return this._shaderValues.getTexture(UnlitMaterial.ALBEDOTEXTURE);
        },
        set: function (value) {
            if (value) {
                this._defineDatas.add(UnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE);
            }
            else {
                this._defineDatas.remove(UnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE);
            }
            this._shaderValues.setTexture(UnlitMaterial.ALBEDOTEXTURE, value);
        },
        enumerable: true,
        configurable: true
    });
    UnlitMaterial.initShader = function () {
        if (UnlitMaterial.hasInit) {
            return;
        }
        UnlitMaterial.hasInit = true;
        UnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE = UnlitMaterial.shaderDefines.registerDefine("ALBEDOTEXTURE");
        UnlitMaterial.SHADERDEFINE_TILINGOFFSET = UnlitMaterial.shaderDefines.registerDefine("TILINGOFFSET");
        UnlitMaterial.SHADERDEFINE_ENABLEVERTEXCOLOR = UnlitMaterial.shaderDefines.registerDefine("ENABLEVERTEXCOLOR");
        var attributeMap = {
            'a_Position': /*laya.d3.graphics.Vertex.VertexMesh.MESH_POSITION0*/ 0,
            'a_Color': /*laya.d3.graphics.Vertex.VertexMesh.MESH_COLOR0*/ 1,
            'a_Texcoord0': /*laya.d3.graphics.Vertex.VertexMesh.MESH_TEXTURECOORDINATE0*/ 2,
            'a_BoneWeights': /*laya.d3.graphics.Vertex.VertexMesh.MESH_BLENDWEIGHT0*/ 7,
            'a_BoneIndices': /*laya.d3.graphics.Vertex.VertexMesh.MESH_BLENDINDICES0*/ 6
        };
        var uniformMap = {
            'u_Bones': /*laya.d3.shader.Shader3D.PERIOD_CUSTOM*/ 0,
            'u_AlbedoTexture': /*laya.d3.shader.Shader3D.PERIOD_MATERIAL*/ 1,
            'u_AlbedoColor': /*laya.d3.shader.Shader3D.PERIOD_MATERIAL*/ 1,
            'u_TilingOffset': /*laya.d3.shader.Shader3D.PERIOD_MATERIAL*/ 1,
            'u_AlphaTestValue': /*laya.d3.shader.Shader3D.PERIOD_MATERIAL*/ 1,
            'u_MvpMatrix': /*laya.d3.shader.Shader3D.PERIOD_SPRITE*/ 2,
            'u_FogStart': /*laya.d3.shader.Shader3D.PERIOD_SCENE*/ 4,
            'u_FogRange': /*laya.d3.shader.Shader3D.PERIOD_SCENE*/ 4,
            'u_FogColor': /*laya.d3.shader.Shader3D.PERIOD_SCENE*/ 4
        };
        var vs = "#include \"Lighting.glsl\";\n\nattribute vec4 a_Position;\n\nattribute vec2 a_Texcoord0;\n\nuniform mat4 u_MvpMatrix;\n\nattribute vec4 a_Color;\nvarying vec4 v_Color;\nvarying vec2 v_Texcoord0;\n\n#ifdef TILINGOFFSET\n	uniform vec4 u_TilingOffset;\n#endif\n\n#ifdef BONE\n	const int c_MaxBoneCount = 24;\n	attribute vec4 a_BoneIndices;\n	attribute vec4 a_BoneWeights;\n	uniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\nvoid main() {\n	#ifdef BONE\n		mat4 skinTransform = mat4(0.0);\n		skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n		skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n		skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n		skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n		vec4 position = skinTransform * a_Position;\n		gl_Position = u_MvpMatrix * position;\n	#else\n		gl_Position = u_MvpMatrix * a_Position;\n	#endif\n\n	v_Texcoord0 = a_Texcoord0;\n	#ifdef TILINGOFFSET\n		v_Texcoord0=TransformUV(v_Texcoord0,u_TilingOffset);\n	#endif\n\n	#if defined(COLOR)&&defined(ENABLEVERTEXCOLOR)\n		v_Color = a_Color;\n	#endif\n	gl_Position=remapGLPositionZ(gl_Position);\n}";
        var ps = "#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n#if defined(COLOR)&&defined(ENABLEVERTEXCOLOR)\n	varying vec4 v_Color;\n#endif\n\n#ifdef ALBEDOTEXTURE\n	uniform sampler2D u_AlbedoTexture;\n	varying vec2 v_Texcoord0;\n#endif\n\nuniform vec4 u_AlbedoColor;\n\n#ifdef ALPHATEST\n	uniform float u_AlphaTestValue;\n#endif\n\n#ifdef FOG\n	uniform float u_FogStart;\n	uniform float u_FogRange;\n	#ifdef ADDTIVEFOG\n	#else\n		uniform vec3 u_FogColor;\n	#endif\n#endif\n\nvoid main()\n{\n	vec4 color =  u_AlbedoColor;\n	#ifdef ALBEDOTEXTURE\n		color *= texture2D(u_AlbedoTexture, v_Texcoord0);\n	#endif\n	#if defined(COLOR)&&defined(ENABLEVERTEXCOLOR)\n		color *= v_Color;\n	#endif\n	\n	#ifdef ALPHATEST\n		if(color.a < u_AlphaTestValue)\n			discard;\n	#endif\n	\n	gl_FragColor = color;\n	\n	#ifdef FOG\n		float lerpFact = clamp((1.0 / gl_FragCoord.w - u_FogStart) / u_FogRange, 0.0, 1.0);\n		#ifdef ADDTIVEFOG\n			gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.0), lerpFact);\n		#else\n			gl_FragColor.rgb = mix(gl_FragColor.rgb, u_FogColor, lerpFact);\n		#endif\n	#endif\n	\n}\n\n";
        var shader = Laya.Shader3D.add(UnlitMaterial.shaderName);
        var subShader = new Laya.SubShader(attributeMap, uniformMap, Laya.SkinnedMeshSprite3D.shaderDefines, UnlitMaterial.shaderDefines);
        shader.addSubShader(subShader);
        subShader.addShaderPass(vs, ps);
    };
    UnlitMaterial.hasInit = false;
    UnlitMaterial.shaderName = "UnlitShader";
    UnlitMaterial.ALBEDOTEXTURE = Laya.Shader3D.propertyNameToID('u_AlbedoTexture');
    UnlitMaterial.ALBEDOCOLOR = Laya.Shader3D.propertyNameToID('u_AlbedoColor');
    UnlitMaterial.RENDERMODE_OPAQUE = 0;
    UnlitMaterial.RENDERMODE_CUTOUT = 1;
    UnlitMaterial.RENDERMODE_TRANSPARENT = 2;
    UnlitMaterial.RENDERMODE_ADDTIVE = 3;
    UnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE = 0;
    UnlitMaterial.SHADERDEFINE_TILINGOFFSET = 0;
    UnlitMaterial.SHADERDEFINE_ENABLEVERTEXCOLOR = 0;
    return UnlitMaterial;
}(Laya.BaseMaterial));
exports.UnlitMaterial = UnlitMaterial;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NvZnQvbGF5YTIvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9zY3JpcHQvQ3ViZUNvbnRyb2xsZXIudHMiLCJzcmMvc2NyaXB0L0dhbWVVSS50cyIsInNyYy9zY3JpcHQvTWF0ZXJpYWxBbmRTaGFkZXIvVW5saXRNYXRlcmlhbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBLGdHQUFnRzs7QUFFaEc7O0VBRUU7QUFDRjtJQWFJO0lBQWMsQ0FBQztJQUNSLGVBQUksR0FBWDtRQUNJLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO0lBRWpELENBQUM7SUFoQk0sZ0JBQUssR0FBUSxHQUFHLENBQUM7SUFDakIsaUJBQU0sR0FBUSxJQUFJLENBQUM7SUFDbkIsb0JBQVMsR0FBUSxZQUFZLENBQUM7SUFDOUIscUJBQVUsR0FBUSxNQUFNLENBQUM7SUFDekIsaUJBQU0sR0FBUSxLQUFLLENBQUM7SUFDcEIsaUJBQU0sR0FBUSxNQUFNLENBQUM7SUFDckIscUJBQVUsR0FBSyxzQkFBc0IsQ0FBQztJQUN0QyxvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsSUFBSSxDQUFDO0lBQ2xCLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNCLDRCQUFpQixHQUFTLElBQUksQ0FBQztJQU0xQyxpQkFBQztDQWxCRCxBQWtCQyxJQUFBO2tCQWxCb0IsVUFBVTtBQW1CL0IsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDOzs7O0FDeEJsQiwyQ0FBc0M7QUFDdEMsMENBQXFDO0FBQ3JDO0lBQ0M7UUFDQyxnQkFBZ0I7UUFDaEIs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QW9vQyxDQUFDO1FBQzlvQyxJQUFJLEVBQUUsR0FBRyxpbUNBQWltQyxDQUFDO1FBQzNtQyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDekQsSUFBSSxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxVQUFVLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGFBQWEsRUFBRSxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbEksTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUMvQixTQUFTLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBdEdNLHFCQUFPLEdBQUcsS0FBSyxDQUFDO0lBQ2hCLHdCQUFVLEdBQUcsYUFBYSxDQUFDO0lBQzNCLDJCQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ2xFLHlCQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUU5RCwrQkFBaUIsR0FBRyxDQUFDLENBQUM7SUFDdEIsK0JBQWlCLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLG9DQUFzQixHQUFHLENBQUMsQ0FBQztJQUMzQixnQ0FBa0IsR0FBRyxDQUFDLENBQUM7SUFDdkIsd0NBQTBCLEdBQUcsQ0FBQyxDQUFDO0lBQy9CLHVDQUF5QixHQUFHLENBQUMsQ0FBQztJQUM5Qiw0Q0FBOEIsR0FBRyxDQUFDLENBQUM7SUE0RjlDLG9CQUFDO0NBekdELEFBeUdDLENBekdrQyxJQUFJLENBQUMsWUFBWSxHQXlHbkQ7QUF6R1ksc0NBQWEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcblxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9NjQwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTEzNjtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZml4ZWR3aWR0aFwiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwibm9uZVwiO1xyXG4gICAgc3RhdGljIGFsaWduVjpzdHJpbmc9XCJ0b3BcIjtcclxuICAgIHN0YXRpYyBhbGlnbkg6c3RyaW5nPVwibGVmdFwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwidGVzdC9UZXN0U2NlbmUuc2NlbmVcIjtcclxuICAgIHN0YXRpYyBzY2VuZVJvb3Q6c3RyaW5nPVwiXCI7XHJcbiAgICBzdGF0aWMgZGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBzdGF0OmJvb2xlYW49dHJ1ZTtcclxuICAgIHN0YXRpYyBwaHlzaWNzRGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcblxyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcuaW5pdCgpOyIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IEdhbWVVSSBmcm9tIFwiLi9zY3JpcHQvR2FtZVVJXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0Ly8gR2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdFx0bmV3IEdhbWVVSSgpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCJleHBvcnQgY2xhc3MgQ3ViZUNvbnRyb2xsZXIgZXh0ZW5kcyBMYXlhLlNjcmlwdFxyXG57XHJcbiAgICBwcml2YXRlIF9vd25lcjogTGF5YS5TcHJpdGUzRDtcclxuXHJcbiAgICBvbkF3YWtlKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9vd25lciA9IHRoaXMub3duZXIgYXMgTGF5YS5TcHJpdGUzRDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yb3RhdGVWMyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgLTAuMDEsIDApO1xyXG4gICAgb25VcGRhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX293bmVyLnRyYW5zZm9ybS5yb3RhdGUodGhpcy5fcm90YXRlVjMsIHRydWUpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgdWkgfSBmcm9tIFwiLi8uLi91aS9sYXlhTWF4VUlcIjtcclxuaW1wb3J0IFJFUywgeyBSRVNEMyB9IGZyb20gXCIuL1JFU1wiO1xyXG5pbXBvcnQgeyBDdWJlQ29udHJvbGxlciB9IGZyb20gXCIuL0N1YmVDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEN1c3RvbU1hdGVyaWFsIH0gZnJvbSBcIi4vTWF0ZXJpYWxBbmRTaGFkZXIvQ3VzdG9tTWF0ZXJpYWxcIjtcclxuaW1wb3J0IHsgU3ByaXRlZDNETWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbEFuZFNoYWRlci9TcHJpdGVkM0RNYXRlcmlhbFwiO1xyXG5pbXBvcnQgeyBVbmxpdE1hdGVyaWFsIH0gZnJvbSBcIi4vTWF0ZXJpYWxBbmRTaGFkZXIvVW5saXRNYXRlcmlhbFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVVJXHJcbntcclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB3aW5kb3dbJ2d1J10gPSB0aGlzO1xyXG5cclxuICAgICAgICBMYXlhLlNoYWRlcjNELmRlYnVnTW9kZSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8v5re75YqgM0TlnLrmma9cclxuICAgICAgICBsZXQgc2NlbmU6IExheWEuU2NlbmUzRCA9IExheWEuc3RhZ2UuYWRkQ2hpbGQobmV3IExheWEuU2NlbmUzRCgpKSBhcyBMYXlhLlNjZW5lM0Q7XHJcblxyXG4gICAgICAgIC8v5re75Yqg54Wn55u45py6XHJcbiAgICAgICAgbGV0IGNhbWVyYTogTGF5YS5DYW1lcmEgPSAoc2NlbmUuYWRkQ2hpbGQobmV3IExheWEuQ2FtZXJhKDAsIDAuMSwgMTAwKSkpIGFzIExheWEuQ2FtZXJhO1xyXG4gICAgICAgIGNhbWVyYS50cmFuc2Zvcm0udHJhbnNsYXRlKG5ldyBMYXlhLlZlY3RvcjMoMCwgMywgMykpO1xyXG4gICAgICAgIGNhbWVyYS50cmFuc2Zvcm0ucm90YXRlKG5ldyBMYXlhLlZlY3RvcjMoLTMwLCAwLCAwKSwgdHJ1ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAvL+a3u+WKoOaWueWQkeWFiVxyXG4gICAgICAgIGxldCBkaXJlY3Rpb25MaWdodDogTGF5YS5EaXJlY3Rpb25MaWdodCA9IHNjZW5lLmFkZENoaWxkKG5ldyBMYXlhLkRpcmVjdGlvbkxpZ2h0KCkpIGFzIExheWEuRGlyZWN0aW9uTGlnaHQ7XHJcbiAgICAgICAgZGlyZWN0aW9uTGlnaHQuY29sb3IgPSBuZXcgTGF5YS5WZWN0b3IzKDAuNiwgMC42LCAwLjYpO1xyXG4gICAgICAgIGRpcmVjdGlvbkxpZ2h0LnRyYW5zZm9ybS53b3JsZE1hdHJpeC5zZXRGb3J3YXJkKG5ldyBMYXlhLlZlY3RvcjMoMSwgLTEsIDApKTtcclxuXHJcbiAgICAgICAgLy/mt7vliqDoh6rlrprkuYnmqKHlnotcclxuICAgICAgICBsZXQgYm94OiBMYXlhLk1lc2hTcHJpdGUzRCA9IHNjZW5lLmFkZENoaWxkKG5ldyBMYXlhLk1lc2hTcHJpdGUzRChMYXlhLlByaW1pdGl2ZU1lc2guY3JlYXRlQm94KDEsIDEsIDEpKSkgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcbiAgICAgICAgYm94LnRyYW5zZm9ybS5yb3RhdGUobmV3IExheWEuVmVjdG9yMygwLCA0NSwgMCksIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgYm94LmFkZENvbXBvbmVudChDdWJlQ29udHJvbGxlcik7XHJcblxyXG4gICAgICAgIC8vIHZhciBjdXN0b21NYXRlcmlhbDogQ3VzdG9tTWF0ZXJpYWwgPSBuZXcgQ3VzdG9tTWF0ZXJpYWwoKTtcclxuICAgICAgICAvLyBib3gubWVzaFJlbmRlcmVyLnNoYXJlZE1hdGVyaWFsID0gY3VzdG9tTWF0ZXJpYWw7XHJcblxyXG4gICAgICAgIC8vIGxldCBzcE1hdDogTGF5YS5VbmxpdE1hdGVyaWFsID0gbmV3IExheWEuVW5saXRNYXRlcmlhbCgpO1xyXG4gICAgICAgIC8vIExheWEuVGV4dHVyZTJELmxvYWQoXCJyZXMvbGF5YWJveC5wbmdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZShudWxsLCAodGV4KSA9PlxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgc3BNYXQuYWxiZWRvVGV4dHVyZSA9IHRleDtcclxuICAgICAgICAvLyB9KSk7XHJcbiAgICAgICAgLy8gYm94Lm1lc2hSZW5kZXJlci5tYXRlcmlhbCA9IHNwTWF0O1xyXG5cclxuICAgICAgICBsZXQgc3BNYXQ6IFVubGl0TWF0ZXJpYWwgPSBuZXcgVW5saXRNYXRlcmlhbCgpO1xyXG4gICAgICAgIExheWEuVGV4dHVyZTJELmxvYWQoXCJyZXMvbGF5YWJveC5wbmdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZShudWxsLCAodGV4KSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3BNYXQuYWxiZWRvVGV4dHVyZSA9IHRleDtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgYm94Lm1lc2hSZW5kZXJlci5tYXRlcmlhbCA9IHNwTWF0O1xyXG5cclxuICAgICAgICAvLyBsZXQgbWF0ZXJpYWw6IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsID0gbmV3IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsKCk7XHJcbiAgICAgICAgLy8gTGF5YS5UZXh0dXJlMkQubG9hZChcInJlcy9sYXlhYm94LnBuZ1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKG51bGwsIGZ1bmN0aW9uICh0ZXg6IExheWEuVGV4dHVyZTJEKVxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgbWF0ZXJpYWwuYWxiZWRvVGV4dHVyZSA9IHRleDtcclxuICAgICAgICAvLyB9KSk7XHJcbiAgICAgICAgLy8gYm94Lm1lc2hSZW5kZXJlci5tYXRlcmlhbCA9IG1hdGVyaWFsO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFVubGl0TWF0ZXJpYWwgZXh0ZW5kcyBMYXlhLkJhc2VNYXRlcmlhbFxyXG57XHJcbiAgICBzdGF0aWMgaGFzSW5pdCA9IGZhbHNlO1xyXG4gICAgc3RhdGljIHNoYWRlck5hbWUgPSBcIlVubGl0U2hhZGVyXCI7XHJcbiAgICBzdGF0aWMgQUxCRURPVEVYVFVSRSA9IExheWEuU2hhZGVyM0QucHJvcGVydHlOYW1lVG9JRCgndV9BbGJlZG9UZXh0dXJlJyk7XHJcbiAgICBzdGF0aWMgQUxCRURPQ09MT1IgPSBMYXlhLlNoYWRlcjNELnByb3BlcnR5TmFtZVRvSUQoJ3VfQWxiZWRvQ29sb3InKTtcclxuXHJcbiAgICBzdGF0aWMgUkVOREVSTU9ERV9PUEFRVUUgPSAwO1xyXG4gICAgc3RhdGljIFJFTkRFUk1PREVfQ1VUT1VUID0gMTtcclxuICAgIHN0YXRpYyBSRU5ERVJNT0RFX1RSQU5TUEFSRU5UID0gMjtcclxuICAgIHN0YXRpYyBSRU5ERVJNT0RFX0FERFRJVkUgPSAzO1xyXG4gICAgc3RhdGljIFNIQURFUkRFRklORV9BTEJFRE9URVhUVVJFID0gMDtcclxuICAgIHN0YXRpYyBTSEFERVJERUZJTkVfVElMSU5HT0ZGU0VUID0gMDtcclxuICAgIHN0YXRpYyBTSEFERVJERUZJTkVfRU5BQkxFVkVSVEVYQ09MT1IgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgX2FsYmVkb0ludGVuc2l0eSA9IDEuMDtcclxuICAgIHByaXZhdGUgX2VuYWJsZVZlcnRleENvbG9yID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9hbGJlZG9Db2xvcjogTGF5YS5WZWN0b3I0ID0gbmV3IExheWEuVmVjdG9yNCgxLCAxLCAxLCAxKTtcclxuICAgIHByaXZhdGUgX2FscGhhVGVzdDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgVW5saXRNYXRlcmlhbC5pbml0U2hhZGVyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRTaGFkZXJOYW1lKFVubGl0TWF0ZXJpYWwuc2hhZGVyTmFtZSk7XHJcbiAgICAgICAgdGhpcy5fc2hhZGVyVmFsdWVzLnNldFZlY3RvcihVbmxpdE1hdGVyaWFsLkFMQkVET0NPTE9SLCBuZXcgTGF5YS5WZWN0b3I0KDEsIDEsIDEsIDEpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGFscGhhVGVzdCh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9hbHBoYVRlc3QgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGFscGhhVGVzdCgpOiBib29sZWFuXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FscGhhVGVzdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGFsYmVkb0NvbG9yKHZhbHVlOiBMYXlhLlZlY3RvcjQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fYWxiZWRvQ29sb3IgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9zaGFkZXJWYWx1ZXMuc2V0VmVjdG9yKFVubGl0TWF0ZXJpYWwuQUxCRURPQ09MT1IsIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGFsYmVkb0NvbG9yKClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWxiZWRvQ29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBhbGJlZG9UZXh0dXJlKHZhbHVlOiBMYXlhLkJhc2VUZXh0dXJlKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmluZURhdGFzLmFkZChVbmxpdE1hdGVyaWFsLlNIQURFUkRFRklORV9BTEJFRE9URVhUVVJFKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVmaW5lRGF0YXMucmVtb3ZlKFVubGl0TWF0ZXJpYWwuU0hBREVSREVGSU5FX0FMQkVET1RFWFRVUkUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zaGFkZXJWYWx1ZXMuc2V0VGV4dHVyZShVbmxpdE1hdGVyaWFsLkFMQkVET1RFWFRVUkUsIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGFsYmVkb1RleHR1cmUoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFkZXJWYWx1ZXMuZ2V0VGV4dHVyZShVbmxpdE1hdGVyaWFsLkFMQkVET1RFWFRVUkUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbml0U2hhZGVyKClcclxuICAgIHtcclxuICAgICAgICBpZiAoVW5saXRNYXRlcmlhbC5oYXNJbml0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVbmxpdE1hdGVyaWFsLmhhc0luaXQgPSB0cnVlO1xyXG5cclxuICAgICAgICBVbmxpdE1hdGVyaWFsLlNIQURFUkRFRklORV9BTEJFRE9URVhUVVJFID0gVW5saXRNYXRlcmlhbC5zaGFkZXJEZWZpbmVzLnJlZ2lzdGVyRGVmaW5lKFwiQUxCRURPVEVYVFVSRVwiKTtcclxuICAgICAgICBVbmxpdE1hdGVyaWFsLlNIQURFUkRFRklORV9USUxJTkdPRkZTRVQgPSBVbmxpdE1hdGVyaWFsLnNoYWRlckRlZmluZXMucmVnaXN0ZXJEZWZpbmUoXCJUSUxJTkdPRkZTRVRcIik7XHJcbiAgICAgICAgVW5saXRNYXRlcmlhbC5TSEFERVJERUZJTkVfRU5BQkxFVkVSVEVYQ09MT1IgPSBVbmxpdE1hdGVyaWFsLnNoYWRlckRlZmluZXMucmVnaXN0ZXJEZWZpbmUoXCJFTkFCTEVWRVJURVhDT0xPUlwiKTtcclxuXHJcbiAgICAgICAgbGV0IGF0dHJpYnV0ZU1hcCA9IHtcclxuICAgICAgICAgICAgJ2FfUG9zaXRpb24nOi8qbGF5YS5kMy5ncmFwaGljcy5WZXJ0ZXguVmVydGV4TWVzaC5NRVNIX1BPU0lUSU9OMCovMCxcclxuICAgICAgICAgICAgJ2FfQ29sb3InOi8qbGF5YS5kMy5ncmFwaGljcy5WZXJ0ZXguVmVydGV4TWVzaC5NRVNIX0NPTE9SMCovMSxcclxuICAgICAgICAgICAgJ2FfVGV4Y29vcmQwJzovKmxheWEuZDMuZ3JhcGhpY3MuVmVydGV4LlZlcnRleE1lc2guTUVTSF9URVhUVVJFQ09PUkRJTkFURTAqLzIsXHJcbiAgICAgICAgICAgICdhX0JvbmVXZWlnaHRzJzovKmxheWEuZDMuZ3JhcGhpY3MuVmVydGV4LlZlcnRleE1lc2guTUVTSF9CTEVORFdFSUdIVDAqLzcsXHJcbiAgICAgICAgICAgICdhX0JvbmVJbmRpY2VzJzovKmxheWEuZDMuZ3JhcGhpY3MuVmVydGV4LlZlcnRleE1lc2guTUVTSF9CTEVORElORElDRVMwKi82XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgdW5pZm9ybU1hcCA9IHtcclxuICAgICAgICAgICAgJ3VfQm9uZXMnOi8qbGF5YS5kMy5zaGFkZXIuU2hhZGVyM0QuUEVSSU9EX0NVU1RPTSovMCxcclxuICAgICAgICAgICAgJ3VfQWxiZWRvVGV4dHVyZSc6LypsYXlhLmQzLnNoYWRlci5TaGFkZXIzRC5QRVJJT0RfTUFURVJJQUwqLzEsXHJcbiAgICAgICAgICAgICd1X0FsYmVkb0NvbG9yJzovKmxheWEuZDMuc2hhZGVyLlNoYWRlcjNELlBFUklPRF9NQVRFUklBTCovMSxcclxuICAgICAgICAgICAgJ3VfVGlsaW5nT2Zmc2V0JzovKmxheWEuZDMuc2hhZGVyLlNoYWRlcjNELlBFUklPRF9NQVRFUklBTCovMSxcclxuICAgICAgICAgICAgJ3VfQWxwaGFUZXN0VmFsdWUnOi8qbGF5YS5kMy5zaGFkZXIuU2hhZGVyM0QuUEVSSU9EX01BVEVSSUFMKi8xLFxyXG4gICAgICAgICAgICAndV9NdnBNYXRyaXgnOi8qbGF5YS5kMy5zaGFkZXIuU2hhZGVyM0QuUEVSSU9EX1NQUklURSovMixcclxuICAgICAgICAgICAgJ3VfRm9nU3RhcnQnOi8qbGF5YS5kMy5zaGFkZXIuU2hhZGVyM0QuUEVSSU9EX1NDRU5FKi80LFxyXG4gICAgICAgICAgICAndV9Gb2dSYW5nZSc6LypsYXlhLmQzLnNoYWRlci5TaGFkZXIzRC5QRVJJT0RfU0NFTkUqLzQsXHJcbiAgICAgICAgICAgICd1X0ZvZ0NvbG9yJzovKmxheWEuZDMuc2hhZGVyLlNoYWRlcjNELlBFUklPRF9TQ0VORSovNFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCB2cyA9IFwiI2luY2x1ZGUgXFxcIkxpZ2h0aW5nLmdsc2xcXFwiO1xcblxcbmF0dHJpYnV0ZSB2ZWM0IGFfUG9zaXRpb247XFxuXFxuYXR0cmlidXRlIHZlYzIgYV9UZXhjb29yZDA7XFxuXFxudW5pZm9ybSBtYXQ0IHVfTXZwTWF0cml4O1xcblxcbmF0dHJpYnV0ZSB2ZWM0IGFfQ29sb3I7XFxudmFyeWluZyB2ZWM0IHZfQ29sb3I7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQwO1xcblxcbiNpZmRlZiBUSUxJTkdPRkZTRVRcXG5cdHVuaWZvcm0gdmVjNCB1X1RpbGluZ09mZnNldDtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgQk9ORVxcblx0Y29uc3QgaW50IGNfTWF4Qm9uZUNvdW50ID0gMjQ7XFxuXHRhdHRyaWJ1dGUgdmVjNCBhX0JvbmVJbmRpY2VzO1xcblx0YXR0cmlidXRlIHZlYzQgYV9Cb25lV2VpZ2h0cztcXG5cdHVuaWZvcm0gbWF0NCB1X0JvbmVzW2NfTWF4Qm9uZUNvdW50XTtcXG4jZW5kaWZcXG5cXG52b2lkIG1haW4oKSB7XFxuXHQjaWZkZWYgQk9ORVxcblx0XHRtYXQ0IHNraW5UcmFuc2Zvcm0gPSBtYXQ0KDAuMCk7XFxuXHRcdHNraW5UcmFuc2Zvcm0gKz0gdV9Cb25lc1tpbnQoYV9Cb25lSW5kaWNlcy54KV0gKiBhX0JvbmVXZWlnaHRzLng7XFxuXHRcdHNraW5UcmFuc2Zvcm0gKz0gdV9Cb25lc1tpbnQoYV9Cb25lSW5kaWNlcy55KV0gKiBhX0JvbmVXZWlnaHRzLnk7XFxuXHRcdHNraW5UcmFuc2Zvcm0gKz0gdV9Cb25lc1tpbnQoYV9Cb25lSW5kaWNlcy56KV0gKiBhX0JvbmVXZWlnaHRzLno7XFxuXHRcdHNraW5UcmFuc2Zvcm0gKz0gdV9Cb25lc1tpbnQoYV9Cb25lSW5kaWNlcy53KV0gKiBhX0JvbmVXZWlnaHRzLnc7XFxuXHRcdHZlYzQgcG9zaXRpb24gPSBza2luVHJhbnNmb3JtICogYV9Qb3NpdGlvbjtcXG5cdFx0Z2xfUG9zaXRpb24gPSB1X012cE1hdHJpeCAqIHBvc2l0aW9uO1xcblx0I2Vsc2VcXG5cdFx0Z2xfUG9zaXRpb24gPSB1X012cE1hdHJpeCAqIGFfUG9zaXRpb247XFxuXHQjZW5kaWZcXG5cXG5cdHZfVGV4Y29vcmQwID0gYV9UZXhjb29yZDA7XFxuXHQjaWZkZWYgVElMSU5HT0ZGU0VUXFxuXHRcdHZfVGV4Y29vcmQwPVRyYW5zZm9ybVVWKHZfVGV4Y29vcmQwLHVfVGlsaW5nT2Zmc2V0KTtcXG5cdCNlbmRpZlxcblxcblx0I2lmIGRlZmluZWQoQ09MT1IpJiZkZWZpbmVkKEVOQUJMRVZFUlRFWENPTE9SKVxcblx0XHR2X0NvbG9yID0gYV9Db2xvcjtcXG5cdCNlbmRpZlxcblx0Z2xfUG9zaXRpb249cmVtYXBHTFBvc2l0aW9uWihnbF9Qb3NpdGlvbik7XFxufVwiO1xyXG4gICAgICAgIGxldCBwcyA9IFwiI2lmZGVmIEZTSElHSFBSRUNJU0lPTlxcblx0cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiNlbHNlXFxuXHRwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG4jZW5kaWZcXG5cXG4jaWYgZGVmaW5lZChDT0xPUikmJmRlZmluZWQoRU5BQkxFVkVSVEVYQ09MT1IpXFxuXHR2YXJ5aW5nIHZlYzQgdl9Db2xvcjtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgQUxCRURPVEVYVFVSRVxcblx0dW5pZm9ybSBzYW1wbGVyMkQgdV9BbGJlZG9UZXh0dXJlO1xcblx0dmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQwO1xcbiNlbmRpZlxcblxcbnVuaWZvcm0gdmVjNCB1X0FsYmVkb0NvbG9yO1xcblxcbiNpZmRlZiBBTFBIQVRFU1RcXG5cdHVuaWZvcm0gZmxvYXQgdV9BbHBoYVRlc3RWYWx1ZTtcXG4jZW5kaWZcXG5cXG4jaWZkZWYgRk9HXFxuXHR1bmlmb3JtIGZsb2F0IHVfRm9nU3RhcnQ7XFxuXHR1bmlmb3JtIGZsb2F0IHVfRm9nUmFuZ2U7XFxuXHQjaWZkZWYgQUREVElWRUZPR1xcblx0I2Vsc2VcXG5cdFx0dW5pZm9ybSB2ZWMzIHVfRm9nQ29sb3I7XFxuXHQjZW5kaWZcXG4jZW5kaWZcXG5cXG52b2lkIG1haW4oKVxcbntcXG5cdHZlYzQgY29sb3IgPSAgdV9BbGJlZG9Db2xvcjtcXG5cdCNpZmRlZiBBTEJFRE9URVhUVVJFXFxuXHRcdGNvbG9yICo9IHRleHR1cmUyRCh1X0FsYmVkb1RleHR1cmUsIHZfVGV4Y29vcmQwKTtcXG5cdCNlbmRpZlxcblx0I2lmIGRlZmluZWQoQ09MT1IpJiZkZWZpbmVkKEVOQUJMRVZFUlRFWENPTE9SKVxcblx0XHRjb2xvciAqPSB2X0NvbG9yO1xcblx0I2VuZGlmXFxuXHRcXG5cdCNpZmRlZiBBTFBIQVRFU1RcXG5cdFx0aWYoY29sb3IuYSA8IHVfQWxwaGFUZXN0VmFsdWUpXFxuXHRcdFx0ZGlzY2FyZDtcXG5cdCNlbmRpZlxcblx0XFxuXHRnbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG5cdFxcblx0I2lmZGVmIEZPR1xcblx0XHRmbG9hdCBsZXJwRmFjdCA9IGNsYW1wKCgxLjAgLyBnbF9GcmFnQ29vcmQudyAtIHVfRm9nU3RhcnQpIC8gdV9Gb2dSYW5nZSwgMC4wLCAxLjApO1xcblx0XHQjaWZkZWYgQUREVElWRUZPR1xcblx0XHRcdGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoZ2xfRnJhZ0NvbG9yLnJnYiwgdmVjMygwLjApLCBsZXJwRmFjdCk7XFxuXHRcdCNlbHNlXFxuXHRcdFx0Z2xfRnJhZ0NvbG9yLnJnYiA9IG1peChnbF9GcmFnQ29sb3IucmdiLCB1X0ZvZ0NvbG9yLCBsZXJwRmFjdCk7XFxuXHRcdCNlbmRpZlxcblx0I2VuZGlmXFxuXHRcXG59XFxuXFxuXCI7XHJcbiAgICAgICAgbGV0IHNoYWRlciA9IExheWEuU2hhZGVyM0QuYWRkKFVubGl0TWF0ZXJpYWwuc2hhZGVyTmFtZSk7XHJcbiAgICAgICAgbGV0IHN1YlNoYWRlciA9IG5ldyBMYXlhLlN1YlNoYWRlcihhdHRyaWJ1dGVNYXAsIHVuaWZvcm1NYXAsIExheWEuU2tpbm5lZE1lc2hTcHJpdGUzRC5zaGFkZXJEZWZpbmVzLCBVbmxpdE1hdGVyaWFsLnNoYWRlckRlZmluZXMpO1xyXG4gICAgICAgIHNoYWRlci5hZGRTdWJTaGFkZXIoc3ViU2hhZGVyKTtcclxuICAgICAgICBzdWJTaGFkZXIuYWRkU2hhZGVyUGFzcyh2cywgcHMpO1xyXG4gICAgfVxyXG59Il19
