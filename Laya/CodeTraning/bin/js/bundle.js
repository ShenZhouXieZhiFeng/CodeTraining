var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
Object.defineProperty(exports, "__esModule", { value: true });
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "test/TestScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var GameUI_1 = require("./script/GameUI");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        // GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);
        new GameUI_1.default();
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1,"./script/GameUI":3}],3:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var RES_1 = require("./RES");
/**
 * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联
 * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果
 * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。
 */
var GameUI = /** @class */ (function () {
    function GameUI() {
        this._showScene();
        //添加3D场景
        // var scene: Laya.Scene3D = Laya.stage.addChild(new Laya.Scene3D()) as Laya.Scene3D;
        // //添加照相机
        // var camera: Laya.Camera = (scene.addChild(new Laya.Camera(0, 0.1, 100))) as Laya.Camera;
        // camera.transform.translate(new Laya.Vector3(0, 3, 3));
        // camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);
        // //添加方向光
        // var directionLight: Laya.DirectionLight = scene.addChild(new Laya.DirectionLight()) as Laya.DirectionLight;
        // directionLight.color = new Laya.Vector3(0.6, 0.6, 0.6);
        // directionLight.transform.worldMatrix.setForward(new Laya.Vector3(1, -1, 0));
        // //添加自定义模型
        // var box: Laya.MeshSprite3D = scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1, 1, 1))) as Laya.MeshSprite3D;
        // box.transform.rotate(new Laya.Vector3(0, 45, 0), false, false);
        // var material: Laya.BlinnPhongMaterial = new Laya.BlinnPhongMaterial();
        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, function(tex:Laya.Texture2D) {
        // 		material.albedoTexture = tex;
        // }));
        // box.meshRenderer.material = material;
        window['gu'] = this;
    }
    GameUI.prototype._showScene = function () {
        return __awaiter(this, void 0, void 0, function () {
            var sceneUrl, scene, cube, mat;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        sceneUrl = "res/d3/scenes/scene01/Conventional/SampleScene.ls";
                        return [4 /*yield*/, RES_1.RESD3.loadResByFullName(sceneUrl)];
                    case 1:
                        _a.sent();
                        scene = RES_1.default.getResByFullName(sceneUrl);
                        Laya.stage.addChild(scene);
                        cube = scene.getChildByName("Cube");
                        mat = new Laya.PBRStandardMaterial();
                        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(this, (tex: Laya.Texture2D) =>
                        // {
                        //     mat.albedoTexture = tex;
                        //     cube.meshRenderer.material = mat;
                        // }))
                        this.cube = cube;
                        return [2 /*return*/];
                }
            });
        });
    };
    GameUI.prototype.rotate = function (x, y, z) {
        this.cube.transform.rotate(new Laya.Vector3(x, y, z));
    };
    GameUI.prototype.getPYO = function () {
        var v3 = new Laya.Vector3();
        this.cube.transform.rotation.getYawPitchRoll(v3);
        console.error(v3.x * Math.PI, v3.y * Math.PI, v3.z * Math.PI);
    };
    /**度转弧度 */
    GameUI.prototype.deg2rad = function (deg) {
        var res = 0;
        res = deg * Math.PI / 180;
        return res;
    };
    return GameUI;
}());
exports.default = GameUI;
},{"./RES":4}],4:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var la = Laya;
////普通资源类型////
var RES_PATH_ATLAS = "res/atlas"; //图集
var RES_PATH_IMAGE = "res/images"; //图片
var RES_PATH_CONFIG = "res/configs"; //配置文件
var RES_PATH_AUDIO = "res/sounds"; //音频,不能预先加载
var RES_PATH_VIEW = "res/view"; //导出的UI文件
var RES_PATH_ANIMATION = "res/animation"; // 动画文件
////3D类型资源////
var RES_PATH_D3_SCENES = "res/d3/scenes"; //场景
var RES_PATH_D3_MODELS = "res/d3/models"; //模型
var RES_PATH_D3_OTHERS = "res/d3/others"; //其他
/**资源类型 */
var RES_TYPE;
(function (RES_TYPE) {
    RES_TYPE[RES_TYPE["normal"] = 0] = "normal";
    RES_TYPE[RES_TYPE["d3"] = 1] = "d3"; //3d资源，场景，模型等,3d资源用RES3D加载
})(RES_TYPE = exports.RES_TYPE || (exports.RES_TYPE = {}));
/**资源封装类 */
var RES = /** @class */ (function () {
    function RES() {
    }
    /**
     * 根据资源民称后缀拼接资源真实路径，资源需要按照规定位置存放
     * 参数如: 1.jpg
     */
    RES.joinResPath = function (resName) {
        // 如果已经是全路径，就不做凭拼接
        if (resName.indexOf("res/") >= 0) {
            return resName;
        }
        var path = "";
        var suffix = la.Utils.getFileExtension(resName);
        switch (suffix) {
            case "atlas":
                path = RES_PATH_ATLAS;
                // 对序列帧动画做专门处理
                if (resName.indexOf("anim") >= 0) {
                    path = RES_PATH_ANIMATION;
                }
                break;
            case "png":
            case "jpg":
            case "jpeg":
                path = RES_PATH_IMAGE;
                break;
            case "json":
            case "xml":
                path = RES_PATH_CONFIG;
                break;
            case "mp3":
            case "wav":
                path = RES_PATH_AUDIO;
                break;
            case "sk":
                path = RES_PATH_ANIMATION;
                break;
            case "scene":
                path = RES_PATH_VIEW;
                break;
            case "ls":
                path = RES_PATH_D3_SCENES;
                break;
            case "lh":
                path = RES_PATH_D3_MODELS;
                break;
            default:
                break;
        }
        var res = path + "/" + resName;
        return res;
    };
    /**
     * 获取资源的完整路径
     * @param _resName 资源局部路径
     */
    RES.getFullResPath = function (_resName) {
        return this.joinResPath(_resName);
    };
    /**
     * 获取资源，资源需要已经加载过，否则返回空
     * @param resName 资源局部路径，例如: scene1/scene1.ls
     */
    RES.getRes = function (resName) {
        var resFullName = this.joinResPath(resName);
        return this.getResByFullName(resFullName);
    };
    /**
     * 获取资源，资源需要已经加载过，否则返回空
     * @param resName 资源完整路径
     */
    RES.getResByFullName = function (resFullName) {
        var res = la.loader.getRes(resFullName);
        return res;
    };
    /**
     * 完全清除一个资源，注意：3d资源通过这个只能清除一层壳，3d资源的管理只能通过AssetRecord文件来做
     * @param resName 资源局部路径
     */
    RES.clearRes = function (resName) {
        var resFullName = this.joinResPath(resName);
        this.clearResByFullName(resFullName);
    };
    /**
     * 完全清除一个资源，注意：3d资源通过这个只能清除一层壳，3d资源的管理只能通过AssetRecord文件来做
     * @param resName 资源完整路径
     */
    RES.clearResByFullName = function (resFullName) {
        // lg.info(TG_RES, "clearResByFullName %o", resFullName);
        Laya.Loader.clearRes(resFullName);
    };
    return RES;
}());
exports.default = RES;
/**普通资源加载封装 */
var RESNormal = /** @class */ (function () {
    function RESNormal() {
    }
    /**
     * 获得一张图集中的图片,图集需要已加载过，否则回空
     * @param atlasName 图集名称
     * @param imgName 图片名称
     */
    RESNormal.getImageFromAtlas = function (atlasName, imgName) {
        var fullPath = atlasName + "/" + imgName;
        return RES.getResByFullName(fullPath);
    };
    /**
     * 加载单个资源,图集、图片、配置表等
     * @param _resName 资源局部路径，例如: bg.png
     * @param _needMgr 是否归于场景管理
     */
    RESNormal.loadRes = function (_resName, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_path;
            return __generator(this, function (_a) {
                real_path = RES.joinResPath(_resName);
                if (!real_path)
                    return [2 /*return*/, null];
                return [2 /*return*/, this.loadResByFullName(real_path)];
            });
        });
    };
    /**
     * 加载资源组
     * @param _resArr 资源组数组，每个资源都是局部路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESNormal.loadGroupAsync = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_res_arr, _i, _resArr_1, res_name, real_name;
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                real_res_arr = [];
                for (_i = 0, _resArr_1 = _resArr; _i < _resArr_1.length; _i++) {
                    res_name = _resArr_1[_i];
                    real_name = RES.joinResPath(res_name);
                    real_res_arr.push(real_name);
                }
                return [2 /*return*/, this.loadResByFullName(real_res_arr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载资源,使用完整路径
     * @param _resName 完整资源路径或资源组名
     * @param prograssFunc 进度回调，带一个参数（0-1）
     */
    RESNormal.loadResByFullName = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var prograssHandler, progress_handler;
            var _this = this;
            return __generator(this, function (_a) {
                if (!resFullName)
                    return [2 /*return*/];
                prograssHandler = null;
                progress_handler = null;
                if (prograssFunc) {
                    progress_handler = la.Handler.create(this, prograssFunc, null, false);
                }
                return [2 /*return*/, new Promise(function (resolve) {
                        la.loader.load(resFullName, la.Handler.create(_this, function (_res) {
                            // lg.info(TG_RES, "loadResFull normal over %o", resFullName);
                            resolve(_res);
                        }), progress_handler);
                    })];
            });
        });
    };
    return RESNormal;
}());
exports.RESNormal = RESNormal;
/**3d资源加载封装 */
var RESD3 = /** @class */ (function () {
    function RESD3() {
    }
    /**
     * 根据lh、ls资源名称，获取对应的AssetsRecord文件路径
     * @param resName 场景或模型资源的局部路径
     */
    RESD3.getAssetsRecord = function (resName) {
        var resFullName = RES.joinResPath(resName);
        return this.getAssetsRecordByResFullName(resFullName);
    };
    /**
     * 根据lh、ls资源名称，获取对应的AssetsRecord文件路径
     * @param resFullName 场景或模型资源的完整路径
     */
    RESD3.getAssetsRecordByResFullName = function (resFullName) {
        var num = resFullName.lastIndexOf('/');
        var parentFolder = resFullName.substr(0, num);
        var assetsRecordUrl = parentFolder + "/AssetsRecord.json";
        return assetsRecordUrl;
    };
    /**
     * 获取某个已加载过的3d物体的克隆
     * @param _resName 局部路径
     */
    RESD3.getSprited3DClone = function (resName) {
        var spriteModel = RES.getRes(resName);
        return spriteModel.clone();
    };
    /**
     * 加载3D资源,使用完整路径
     * @param resFullName 资源局部路径
     * @param prograssFunc loading函数
     */
    RESD3.loadRes = function (resName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var resFullName;
            return __generator(this, function (_a) {
                resFullName = RES.getFullResPath(resName);
                return [2 /*return*/, this.loadResByFullName(resFullName, prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源组
     * @param _resArr 资源组数组，所有资源都是局部路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESD3.loadGroupAsync = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_res_arr, _i, _resArr_2, res_name, real_name;
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                real_res_arr = [];
                for (_i = 0, _resArr_2 = _resArr; _i < _resArr_2.length; _i++) {
                    res_name = _resArr_2[_i];
                    real_name = RES.joinResPath(res_name);
                    real_res_arr.push(real_name);
                }
                return [2 /*return*/, this.loadResByFullName(real_res_arr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源组
     * @param _resArr 资源组数组，所有资源都是完整路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESD3.loadGroupAsyncByFullName = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                return [2 /*return*/, this.loadResByFullName(_resArr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源,使用完整路径
     * @param resFullName 资源完整路径
     * @param prograssFunc loading函数
     */
    RESD3.loadResByFullName = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var prograssHandler, progress_handler;
            var _this = this;
            return __generator(this, function (_a) {
                if (!resFullName)
                    return [2 /*return*/];
                prograssHandler = null;
                progress_handler = null;
                if (prograssFunc) {
                    progress_handler = la.Handler.create(this, prograssFunc, null, false);
                }
                return [2 /*return*/, new Promise(function (resolve) {
                        la.loader.create(resFullName, la.Handler.create(_this, function () {
                            // lg.info(TG_RES, "loadResByFullName 3d over %o", resFullName);
                            resolve();
                        }), progress_handler);
                    })];
            });
        });
    };
    /**
     * 加载3D资源,基于AssetsRecord加载,进度条更精细
     * @param resFullName 资源完整路径
     * @param prograssFunc loading函数
     */
    RESD3.loadResByAssetsRecord = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var arRes, arConfig, resArr, num, parentFolder, _i, arConfig_1, res;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        arRes = this.getAssetsRecordByResFullName(resFullName);
                        return [4 /*yield*/, this.loadResByFullName(arRes)];
                    case 1:
                        _a.sent();
                        arConfig = RES.getResByFullName(arRes);
                        if (!arConfig || arConfig.length <= 0) {
                            return [2 /*return*/];
                        }
                        resArr = [];
                        num = resFullName.lastIndexOf('/');
                        parentFolder = resFullName.substr(0, num) + '/';
                        for (_i = 0, arConfig_1 = arConfig; _i < arConfig_1.length; _i++) {
                            res = arConfig_1[_i];
                            resArr.push(parentFolder + res.url);
                        }
                        return [4 /*yield*/, this.loadResByFullName(resArr, prograssFunc)];
                    case 2:
                        _a.sent();
                        // 最后再加载并创建自身（ls、lh），其内部资源已经在上方加载完了
                        return [4 /*yield*/, this.loadResByFullName(resFullName)];
                    case 3:
                        // 最后再加载并创建自身（ls、lh），其内部资源已经在上方加载完了
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return RESD3;
}());
exports.RESD3 = RESD3;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NvZnQvbGF5YTIvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9zY3JpcHQvR2FtZVVJLnRzIiwic3JjL3NjcmlwdC9SRVMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQSxnR0FBZ0c7O0FBRWhHOztFQUVFO0FBQ0Y7SUFhSTtJQUFjLENBQUM7SUFDUixlQUFJLEdBQVg7UUFDSSxJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztJQUVqRCxDQUFDO0lBaEJNLGdCQUFLLEdBQVEsR0FBRyxDQUFDO0lBQ2pCLGlCQUFNLEdBQVEsSUFBSSxDQUFDO0lBQ25CLG9CQUFTLEdBQVEsWUFBWSxDQUFDO0lBQzlCLHFCQUFVLEdBQVEsTUFBTSxDQUFDO0lBQ3pCLGlCQUFNLEdBQVEsS0FBSyxDQUFDO0lBQ3BCLGlCQUFNLEdBQVEsTUFBTSxDQUFDO0lBQ3JCLHFCQUFVLEdBQUssc0JBQXNCLENBQUM7SUFDdEMsb0JBQVMsR0FBUSxFQUFFLENBQUM7SUFDcEIsZ0JBQUssR0FBUyxLQUFLLENBQUM7SUFDcEIsZUFBSSxHQUFTLEtBQUssQ0FBQztJQUNuQix1QkFBWSxHQUFTLEtBQUssQ0FBQztJQUMzQiw0QkFBaUIsR0FBUyxJQUFJLENBQUM7SUFNMUMsaUJBQUM7Q0FsQkQsQUFrQkMsSUFBQTtrQkFsQm9CLFVBQVU7QUFtQi9CLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7OztBQ3hCbEIsMkNBQXNDO0FBQ3RDLDBDQUFxQztBQUNyQztJQUNDO1FBQ0MsZ0JBQWdCO1FBQ2hCLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsb0JBQVUsQ0FB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QUcsQ0FBQyxDQUFDO3lCQUN2Qzt3QkFDRCxxQkFBTSxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxFQUFBOzt3QkFBbEQsU0FBa0QsQ0FBQzt3QkFDbkQsbUNBQW1DO3dCQUNuQyxxQkFBTSxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxDQUFDLEVBQUE7O3dCQUR6QyxtQ0FBbUM7d0JBQ25DLFNBQXlDLENBQUM7Ozs7O0tBQzdDO0lBRUwsWUFBQztBQUFELENBMUlBLEFBMElDLElBQUE7QUExSVksc0JBQUsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcblxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9NjQwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTEzNjtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZml4ZWR3aWR0aFwiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwibm9uZVwiO1xyXG4gICAgc3RhdGljIGFsaWduVjpzdHJpbmc9XCJ0b3BcIjtcclxuICAgIHN0YXRpYyBhbGlnbkg6c3RyaW5nPVwibGVmdFwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwidGVzdC9UZXN0U2NlbmUuc2NlbmVcIjtcclxuICAgIHN0YXRpYyBzY2VuZVJvb3Q6c3RyaW5nPVwiXCI7XHJcbiAgICBzdGF0aWMgZGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBzdGF0OmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgZXhwb3J0U2NlbmVUb0pzb246Ym9vbGVhbj10cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKXt9XHJcbiAgICBzdGF0aWMgaW5pdCgpe1xyXG4gICAgICAgIHZhciByZWc6IEZ1bmN0aW9uID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG5cclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmltcG9ydCBHYW1lVUkgZnJvbSBcIi4vc2NyaXB0L0dhbWVVSVwiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdC8vIEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHRcdG5ldyBHYW1lVUkoKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiaW1wb3J0IHsgdWkgfSBmcm9tIFwiLi8uLi91aS9sYXlhTWF4VUlcIjtcclxuaW1wb3J0IFJFUywgeyBSRVNEMyB9IGZyb20gXCIuL1JFU1wiO1xyXG4vKipcclxuICog5pys56S65L6L6YeH55So6Z2e6ISa5pys55qE5pa55byP5a6e546w77yM6ICM5L2/55So57un5om/6aG16Z2i5Z+657G777yM5a6e546w6aG16Z2i6YC76L6R44CC5ZyoSURF6YeM6Z2i6K6+572u5Zy65pmv55qEUnVudGltZeWxnuaAp+WNs+WPr+WSjOWcuuaZr+i/m+ihjOWFs+iBlFxyXG4gKiDnm7jmr5TohJrmnKzmlrnlvI/vvIznu6fmib/lvI/pobXpnaLnsbvvvIzlj6/ku6Xnm7TmjqXkvb/nlKjpobXpnaLlrprkuYnnmoTlsZ7mgKfvvIjpgJrov4dJREXlhoV2YXLlsZ7mgKflrprkuYnvvInvvIzmr5TlpoJ0aGlzLnRpcExibGzvvIx0aGlzLnNjb3JlTGJs77yM5YW35pyJ5Luj56CB5o+Q56S65pWI5p6cXHJcbiAqIOW7uuiuru+8muWmguaenOaYr+mhtemdoue6p+eahOmAu+i+ke+8jOmcgOimgemikee5geiuv+mXrumhtemdouWGheWkmuS4quWFg+e0oO+8jOS9v+eUqOe7p+aJv+W8j+WGmeazle+8jOWmguaenOaYr+eLrOeri+Wwj+aooeWdl++8jOWKn+iDveWNleS4gO+8jOW7uuiurueUqOiEmuacrOaWueW8j+WunueOsO+8jOavlOWmguWtkOW8ueiEmuacrOOAglxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVVJXHJcbntcclxuICAgIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9zaG93U2NlbmUoKTtcclxuXHJcbiAgICAgICAgLy/mt7vliqAzROWcuuaZr1xyXG4gICAgICAgIC8vIHZhciBzY2VuZTogTGF5YS5TY2VuZTNEID0gTGF5YS5zdGFnZS5hZGRDaGlsZChuZXcgTGF5YS5TY2VuZTNEKCkpIGFzIExheWEuU2NlbmUzRDtcclxuXHJcbiAgICAgICAgLy8gLy/mt7vliqDnhafnm7jmnLpcclxuICAgICAgICAvLyB2YXIgY2FtZXJhOiBMYXlhLkNhbWVyYSA9IChzY2VuZS5hZGRDaGlsZChuZXcgTGF5YS5DYW1lcmEoMCwgMC4xLCAxMDApKSkgYXMgTGF5YS5DYW1lcmE7XHJcbiAgICAgICAgLy8gY2FtZXJhLnRyYW5zZm9ybS50cmFuc2xhdGUobmV3IExheWEuVmVjdG9yMygwLCAzLCAzKSk7XHJcbiAgICAgICAgLy8gY2FtZXJhLnRyYW5zZm9ybS5yb3RhdGUobmV3IExheWEuVmVjdG9yMygtMzAsIDAsIDApLCB0cnVlLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8vIC8v5re75Yqg5pa55ZCR5YWJXHJcbiAgICAgICAgLy8gdmFyIGRpcmVjdGlvbkxpZ2h0OiBMYXlhLkRpcmVjdGlvbkxpZ2h0ID0gc2NlbmUuYWRkQ2hpbGQobmV3IExheWEuRGlyZWN0aW9uTGlnaHQoKSkgYXMgTGF5YS5EaXJlY3Rpb25MaWdodDtcclxuICAgICAgICAvLyBkaXJlY3Rpb25MaWdodC5jb2xvciA9IG5ldyBMYXlhLlZlY3RvcjMoMC42LCAwLjYsIDAuNik7XHJcbiAgICAgICAgLy8gZGlyZWN0aW9uTGlnaHQudHJhbnNmb3JtLndvcmxkTWF0cml4LnNldEZvcndhcmQobmV3IExheWEuVmVjdG9yMygxLCAtMSwgMCkpO1xyXG5cclxuICAgICAgICAvLyAvL+a3u+WKoOiHquWumuS5ieaooeWei1xyXG4gICAgICAgIC8vIHZhciBib3g6IExheWEuTWVzaFNwcml0ZTNEID0gc2NlbmUuYWRkQ2hpbGQobmV3IExheWEuTWVzaFNwcml0ZTNEKExheWEuUHJpbWl0aXZlTWVzaC5jcmVhdGVCb3goMSwgMSwgMSkpKSBhcyBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgICAgICAvLyBib3gudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKDAsIDQ1LCAwKSwgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICAvLyB2YXIgbWF0ZXJpYWw6IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsID0gbmV3IExheWEuQmxpbm5QaG9uZ01hdGVyaWFsKCk7XHJcbiAgICAgICAgLy8gTGF5YS5UZXh0dXJlMkQubG9hZChcInJlcy9sYXlhYm94LnBuZ1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKG51bGwsIGZ1bmN0aW9uKHRleDpMYXlhLlRleHR1cmUyRCkge1xyXG4gICAgICAgIC8vIFx0XHRtYXRlcmlhbC5hbGJlZG9UZXh0dXJlID0gdGV4O1xyXG4gICAgICAgIC8vIH0pKTtcclxuICAgICAgICAvLyBib3gubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gbWF0ZXJpYWw7XHJcblxyXG4gICAgICAgIHdpbmRvd1snZ3UnXSA9IHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjdWJlOiBMYXlhLlNwcml0ZTNEO1xyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgX3Nob3dTY2VuZSgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHNjZW5lVXJsID0gXCJyZXMvZDMvc2NlbmVzL3NjZW5lMDEvQ29udmVudGlvbmFsL1NhbXBsZVNjZW5lLmxzXCI7XHJcbiAgICAgICAgYXdhaXQgUkVTRDMubG9hZFJlc0J5RnVsbE5hbWUoc2NlbmVVcmwpO1xyXG4gICAgICAgIGxldCBzY2VuZTogTGF5YS5TY2VuZTNEID0gUkVTLmdldFJlc0J5RnVsbE5hbWUoc2NlbmVVcmwpO1xyXG4gICAgICAgIExheWEuc3RhZ2UuYWRkQ2hpbGQoc2NlbmUpO1xyXG5cclxuICAgICAgICBsZXQgY3ViZTogTGF5YS5NZXNoU3ByaXRlM0QgPSBzY2VuZS5nZXRDaGlsZEJ5TmFtZShcIkN1YmVcIikgYXMgTGF5YS5NZXNoU3ByaXRlM0Q7XHJcblxyXG4gICAgICAgIGxldCBtYXQ6IExheWEuUEJSU3RhbmRhcmRNYXRlcmlhbCA9IG5ldyBMYXlhLlBCUlN0YW5kYXJkTWF0ZXJpYWwoKTtcclxuXHJcbiAgICAgICAgLy8gTGF5YS5UZXh0dXJlMkQubG9hZChcInJlcy9sYXlhYm94LnBuZ1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsICh0ZXg6IExheWEuVGV4dHVyZTJEKSA9PlxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgbWF0LmFsYmVkb1RleHR1cmUgPSB0ZXg7XHJcbiAgICAgICAgLy8gICAgIGN1YmUubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gbWF0O1xyXG4gICAgICAgIC8vIH0pKVxyXG5cclxuICAgICAgICB0aGlzLmN1YmUgPSBjdWJlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcm90YXRlKHgsIHksIHopXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jdWJlLnRyYW5zZm9ybS5yb3RhdGUobmV3IExheWEuVmVjdG9yMyh4LCB5LCB6KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBZTygpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHYzID0gbmV3IExheWEuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuY3ViZS50cmFuc2Zvcm0ucm90YXRpb24uZ2V0WWF3UGl0Y2hSb2xsKHYzKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHYzLnggKiBNYXRoLlBJLCB2My55ICogTWF0aC5QSSwgdjMueiAqIE1hdGguUEkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuW6pui9rOW8p+W6piAqL1xyXG4gICAgcHVibGljIGRlZzJyYWQoZGVnOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlcyA9IDA7XHJcbiAgICAgICAgcmVzID0gZGVnICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG59IiwibGV0IGxhID0gTGF5YTtcclxuXHJcbi8vLy/mma7pgJrotYTmupDnsbvlnosvLy8vXHJcbmNvbnN0IFJFU19QQVRIX0FUTEFTOiBzdHJpbmcgPSBcInJlcy9hdGxhc1wiO1x0XHQvL+WbvumbhlxyXG5jb25zdCBSRVNfUEFUSF9JTUFHRTogc3RyaW5nID0gXCJyZXMvaW1hZ2VzXCI7XHQvL+WbvueJh1xyXG5jb25zdCBSRVNfUEFUSF9DT05GSUc6IHN0cmluZyA9IFwicmVzL2NvbmZpZ3NcIjtcdC8v6YWN572u5paH5Lu2XHJcbmNvbnN0IFJFU19QQVRIX0FVRElPOiBzdHJpbmcgPSBcInJlcy9zb3VuZHNcIjsgICBcdC8v6Z+z6aKRLOS4jeiDvemihOWFiOWKoOi9vVxyXG5jb25zdCBSRVNfUEFUSF9WSUVXOiBzdHJpbmcgPSBcInJlcy92aWV3XCI7ICAgICAgIC8v5a+85Ye655qEVUnmlofku7ZcclxuY29uc3QgUkVTX1BBVEhfQU5JTUFUSU9OOiBzdHJpbmcgPSBcInJlcy9hbmltYXRpb25cIjsgLy8g5Yqo55S75paH5Lu2XHJcbi8vLy8zROexu+Wei+i1hOa6kC8vLy9cclxuY29uc3QgUkVTX1BBVEhfRDNfU0NFTkVTOiBzdHJpbmcgPSBcInJlcy9kMy9zY2VuZXNcIjtcdC8v5Zy65pmvXHJcbmNvbnN0IFJFU19QQVRIX0QzX01PREVMUzogc3RyaW5nID0gXCJyZXMvZDMvbW9kZWxzXCI7XHQvL+aooeWei1xyXG5jb25zdCBSRVNfUEFUSF9EM19PVEhFUlM6IHN0cmluZyA9IFwicmVzL2QzL290aGVyc1wiO1x0Ly/lhbbku5ZcclxuXHJcbi8qKui1hOa6kOexu+WeiyAqL1xyXG5leHBvcnQgZW51bSBSRVNfVFlQRVxyXG57XHJcbiAgICBub3JtYWwsXHQvL+aZrumAmuexu+Wei++8jOWbvumbhu+8jOWbvueJh++8jOmFjee9ruaWh+S7tuetiVxyXG4gICAgZDNcdFx0Ly8zZOi1hOa6kO+8jOWcuuaZr++8jOaooeWei+etiSwzZOi1hOa6kOeUqFJFUzNE5Yqg6L29XHJcbn1cclxuXHJcbi8qKui1hOa6kOWwgeijheexuyAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSRVNcclxue1xyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja7otYTmupDmsJHnp7DlkI7nvIDmi7zmjqXotYTmupDnnJ/lrp7ot6/lvoTvvIzotYTmupDpnIDopoHmjInnhafop4TlrprkvY3nva7lrZjmlL5cclxuICAgICAqIOWPguaVsOWmgjogMS5qcGdcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBqb2luUmVzUGF0aChyZXNOYW1lOiBzdHJpbmcpOiBzdHJpbmdcclxuICAgIHtcclxuICAgICAgICAvLyDlpoLmnpzlt7Lnu4/mmK/lhajot6/lvoTvvIzlsLHkuI3lgZrlh63mi7zmjqVcclxuICAgICAgICBpZihyZXNOYW1lLmluZGV4T2YoXCJyZXMvXCIpID49IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzTmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHBhdGggPSBcIlwiO1xyXG4gICAgICAgIGxldCBzdWZmaXggPSBsYS5VdGlscy5nZXRGaWxlRXh0ZW5zaW9uKHJlc05hbWUpO1xyXG4gICAgICAgIHN3aXRjaCAoc3VmZml4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2FzZSBcImF0bGFzXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQVRMQVM7XHJcbiAgICAgICAgICAgICAgICAvLyDlr7nluo/liJfluKfliqjnlLvlgZrkuJPpl6jlpITnkIZcclxuICAgICAgICAgICAgICAgIGlmKHJlc05hbWUuaW5kZXhPZihcImFuaW1cIikgPj0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQU5JTUFUSU9OO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwbmdcIjpcclxuICAgICAgICAgICAgY2FzZSBcImpwZ1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwianBlZ1wiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX0lNQUdFO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJqc29uXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJ4bWxcIjpcclxuICAgICAgICAgICAgICAgIHBhdGggPSBSRVNfUEFUSF9DT05GSUc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1wM1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwid2F2XCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQVVESU87XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNrXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQU5JTUFUSU9OO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY2VuZVwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX1ZJRVc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxzXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfRDNfU0NFTkVTO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaFwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX0QzX01PREVMUztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXMgPSBgJHtwYXRofS8ke3Jlc05hbWV9YDtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6LWE5rqQ55qE5a6M5pW06Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gX3Jlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnVsbFJlc1BhdGgoX3Jlc05hbWU6IHN0cmluZyk6IHN0cmluZ1xyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmpvaW5SZXNQYXRoKF9yZXNOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlui1hOa6kO+8jOi1hOa6kOmcgOimgeW3sue7j+WKoOi9vei/h++8jOWQpuWImei/lOWbnuepulxyXG4gICAgICogQHBhcmFtIHJlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6E77yM5L6L5aaCOiBzY2VuZTEvc2NlbmUxLmxzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmVzKHJlc05hbWU6IHN0cmluZyk6IGFueVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IHRoaXMuam9pblJlc1BhdGgocmVzTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzQnlGdWxsTmFtZShyZXNGdWxsTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5botYTmupDvvIzotYTmupDpnIDopoHlt7Lnu4/liqDovb3ov4fvvIzlkKbliJnov5Tlm57nqbpcclxuICAgICAqIEBwYXJhbSByZXNOYW1lIOi1hOa6kOWujOaVtOi3r+W+hFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBsZXQgcmVzID0gbGEubG9hZGVyLmdldFJlcyhyZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWujOWFqOa4hemZpOS4gOS4qui1hOa6kO+8jOazqOaEj++8mjNk6LWE5rqQ6YCa6L+H6L+Z5Liq5Y+q6IO95riF6Zmk5LiA5bGC5aOz77yMM2TotYTmupDnmoTnrqHnkIblj6rog73pgJrov4dBc3NldFJlY29yZOaWh+S7tuadpeWBmlxyXG4gICAgICogQHBhcmFtIHJlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXJSZXMocmVzTmFtZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IHRoaXMuam9pblJlc1BhdGgocmVzTmFtZSk7XHJcbiAgICAgICAgdGhpcy5jbGVhclJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a6M5YWo5riF6Zmk5LiA5Liq6LWE5rqQ77yM5rOo5oSP77yaM2TotYTmupDpgJrov4fov5nkuKrlj6rog73muIXpmaTkuIDlsYLlo7PvvIwzZOi1hOa6kOeahOeuoeeQhuWPquiDvemAmui/h0Fzc2V0UmVjb3Jk5paH5Lu25p2l5YGaXHJcbiAgICAgKiBAcGFyYW0gcmVzTmFtZSDotYTmupDlrozmlbTot6/lvoRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGVhclJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJjbGVhclJlc0J5RnVsbE5hbWUgJW9cIiwgcmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIExheWEuTG9hZGVyLmNsZWFyUmVzKHJlc0Z1bGxOYW1lKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKuaZrumAmui1hOa6kOWKoOi9veWwgeijhSAqL1xyXG5leHBvcnQgY2xhc3MgUkVTTm9ybWFsXHJcbntcclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5LiA5byg5Zu+6ZuG5Lit55qE5Zu+54mHLOWbvumbhumcgOimgeW3suWKoOi9vei/h++8jOWQpuWImeWbnuepulxyXG4gICAgICogQHBhcmFtIGF0bGFzTmFtZSDlm77pm4blkI3np7BcclxuICAgICAqIEBwYXJhbSBpbWdOYW1lIOWbvueJh+WQjeensFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEltYWdlRnJvbUF0bGFzKGF0bGFzTmFtZTogc3RyaW5nLCBpbWdOYW1lOiBzdHJpbmcpOiBsYXlhLnJlc291cmNlLlRleHR1cmVcclxuICAgIHtcclxuICAgICAgICBsZXQgZnVsbFBhdGggPSBgJHthdGxhc05hbWV9LyR7aW1nTmFtZX1gO1xyXG4gICAgICAgIHJldHVybiBSRVMuZ2V0UmVzQnlGdWxsTmFtZShmdWxsUGF0aCkgYXMgbGF5YS5yZXNvdXJjZS5UZXh0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L295Y2V5Liq6LWE5rqQLOWbvumbhuOAgeWbvueJh+OAgemFjee9ruihqOetiVxyXG4gICAgICogQHBhcmFtIF9yZXNOYW1lIOi1hOa6kOWxgOmDqOi3r+W+hO+8jOS+i+WmgjogYmcucG5nXHJcbiAgICAgKiBAcGFyYW0gX25lZWRNZ3Ig5piv5ZCm5b2S5LqO5Zy65pmv566h55CGXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlcyhfcmVzTmFtZTogc3RyaW5nLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGxldCByZWFsX3BhdGggPSBSRVMuam9pblJlc1BhdGgoX3Jlc05hbWUpO1xyXG4gICAgICAgIGlmICghcmVhbF9wYXRoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZWFsX3BhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L296LWE5rqQ57uEXHJcbiAgICAgKiBAcGFyYW0gX3Jlc0FyciDotYTmupDnu4TmlbDnu4TvvIzmr4/kuKrotYTmupDpg73mmK/lsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcHJvZ3Jhc3NGdW5jIOi/m+W6puWbnuiwg++8jOW4puS4gOS4quWPguaVsO+8iDAtMe+8iVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRHcm91cEFzeW5jKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8Ym9vbGVhbj5cclxuICAgIHtcclxuICAgICAgICBpZiAoIV9yZXNBcnIgfHwgX3Jlc0Fyci5sZW5ndGggPD0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlYWxfcmVzX2FyciA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHJlc19uYW1lIG9mIF9yZXNBcnIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcmVhbF9uYW1lID0gUkVTLmpvaW5SZXNQYXRoKHJlc19uYW1lKTtcclxuICAgICAgICAgICAgcmVhbF9yZXNfYXJyLnB1c2gocmVhbF9uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFJlc0J5RnVsbE5hbWUocmVhbF9yZXNfYXJyLCBfcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vei1hOa6kCzkvb/nlKjlrozmlbTot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcmVzTmFtZSDlrozmlbTotYTmupDot6/lvoTmiJbotYTmupDnu4TlkI1cclxuICAgICAqIEBwYXJhbSBwcm9ncmFzc0Z1bmMg6L+b5bqm5Zue6LCD77yM5bim5LiA5Liq5Y+C5pWw77yIMC0x77yJXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IGFueSwgcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghcmVzRnVsbE5hbWUpIHJldHVybjtcclxuICAgICAgICBsZXQgcHJvZ3Jhc3NIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJsb2FkUmVzRnVsbCBub3JtYWwgJW9cIiwgcmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIGxldCBwcm9ncmVzc19oYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvZ3Jhc3NGdW5jKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlciA9IGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHByb2dyYXNzRnVuYywgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYS5sb2FkZXIubG9hZFxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgcmVzRnVsbE5hbWUsXHJcbiAgICAgICAgICAgICAgICBsYS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCAoX3JlcykgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJsb2FkUmVzRnVsbCBub3JtYWwgb3ZlciAlb1wiLCByZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfcmVzKTtcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKjNk6LWE5rqQ5Yqg6L295bCB6KOFICovXHJcbmV4cG9ydCBjbGFzcyBSRVNEM1xyXG57XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5saOOAgWxz6LWE5rqQ5ZCN56ew77yM6I635Y+W5a+55bqU55qEQXNzZXRzUmVjb3Jk5paH5Lu26Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gcmVzTmFtZSDlnLrmma/miJbmqKHlnovotYTmupDnmoTlsYDpg6jot6/lvoRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRBc3NldHNSZWNvcmQocmVzTmFtZTogc3RyaW5nKTogc3RyaW5nXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlc0Z1bGxOYW1lID0gUkVTLmpvaW5SZXNQYXRoKHJlc05hbWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2ubGjjgIFsc+i1hOa6kOWQjeensO+8jOiOt+WPluWvueW6lOeahEFzc2V0c1JlY29yZOaWh+S7tui3r+W+hFxyXG4gICAgICogQHBhcmFtIHJlc0Z1bGxOYW1lIOWcuuaZr+aIluaooeWei+i1hOa6kOeahOWujOaVtOi3r+W+hFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZyk6IHN0cmluZ1xyXG4gICAge1xyXG4gICAgICAgIGxldCBudW0gPSByZXNGdWxsTmFtZS5sYXN0SW5kZXhPZignLycpO1xyXG4gICAgICAgIGxldCBwYXJlbnRGb2xkZXIgPSByZXNGdWxsTmFtZS5zdWJzdHIoMCwgbnVtKTtcclxuICAgICAgICBsZXQgYXNzZXRzUmVjb3JkVXJsID0gYCR7cGFyZW50Rm9sZGVyfS9Bc3NldHNSZWNvcmQuanNvbmA7XHJcbiAgICAgICAgcmV0dXJuIGFzc2V0c1JlY29yZFVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluafkOS4quW3suWKoOi9vei/h+eahDNk54mp5L2T55qE5YWL6ZqGXHJcbiAgICAgKiBAcGFyYW0gX3Jlc05hbWUg5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0U3ByaXRlZDNEQ2xvbmUocmVzTmFtZSk6IExheWEuU3ByaXRlM0RcclxuICAgIHtcclxuICAgICAgICBsZXQgc3ByaXRlTW9kZWw6IExheWEuU3ByaXRlM0QgPSBSRVMuZ2V0UmVzKHJlc05hbWUpIGFzIExheWEuU3ByaXRlM0Q7XHJcbiAgICAgICAgcmV0dXJuIHNwcml0ZU1vZGVsLmNsb25lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb0zROi1hOa6kCzkvb/nlKjlrozmlbTot6/lvoRcclxuICAgICAqIEBwYXJhbSByZXNGdWxsTmFtZSDotYTmupDlsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBwcm9ncmFzc0Z1bmMgbG9hZGluZ+WHveaVsFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRSZXMocmVzTmFtZTogc3RyaW5nLCBwcm9ncmFzc0Z1bmM6IEZ1bmN0aW9uID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IFJFUy5nZXRGdWxsUmVzUGF0aChyZXNOYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZXNGdWxsTmFtZSwgcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vTNE6LWE5rqQ57uEXHJcbiAgICAgKiBAcGFyYW0gX3Jlc0FyciDotYTmupDnu4TmlbDnu4TvvIzmiYDmnInotYTmupDpg73mmK/lsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcHJvZ3Jhc3NGdW5jIOi/m+W6puWbnuiwg++8jOW4puS4gOS4quWPguaVsO+8iDAtMe+8iVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRHcm91cEFzeW5jKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghX3Jlc0FyciB8fCBfcmVzQXJyLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVhbF9yZXNfYXJyID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcmVzX25hbWUgb2YgX3Jlc0FycilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCByZWFsX25hbWUgPSBSRVMuam9pblJlc1BhdGgocmVzX25hbWUpO1xyXG4gICAgICAgICAgICByZWFsX3Jlc19hcnIucHVzaChyZWFsX25hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZWFsX3Jlc19hcnIsIF9wcm9ncmFzc0Z1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L29M0TotYTmupDnu4RcclxuICAgICAqIEBwYXJhbSBfcmVzQXJyIOi1hOa6kOe7hOaVsOe7hO+8jOaJgOaciei1hOa6kOmDveaYr+WujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIF9wcm9ncmFzc0Z1bmMg6L+b5bqm5Zue6LCD77yM5bim5LiA5Liq5Y+C5pWw77yIMC0x77yJXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZEdyb3VwQXN5bmNCeUZ1bGxOYW1lKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghX3Jlc0FyciB8fCBfcmVzQXJyLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShfcmVzQXJyLCBfcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vTNE6LWE5rqQLOS9v+eUqOWujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIHJlc0Z1bGxOYW1lIOi1hOa6kOWujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIHByb2dyYXNzRnVuYyBsb2FkaW5n5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IGFueSwgcHJvZ3Jhc3NGdW5jOiBGdW5jdGlvbiA9IG51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCFyZXNGdWxsTmFtZSkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBwcm9ncmFzc0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIGxnLmluZm8oVEdfUkVTLCBcImxvYWRSZXNCeUZ1bGxOYW1lIDNkIGJlZ2luICVvXCIsIHJlc0Z1bGxOYW1lKTtcclxuICAgICAgICBsZXQgcHJvZ3Jlc3NfaGFuZGxlcjogTGF5YS5IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvZ3Jhc3NGdW5jKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlciA9IGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHByb2dyYXNzRnVuYywgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYS5sb2FkZXIuY3JlYXRlXHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICByZXNGdWxsTmFtZSxcclxuICAgICAgICAgICAgICAgIGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsICgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGcuaW5mbyhUR19SRVMsIFwibG9hZFJlc0J5RnVsbE5hbWUgM2Qgb3ZlciAlb1wiLCByZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc19oYW5kbGVyXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb0zROi1hOa6kCzln7rkuo5Bc3NldHNSZWNvcmTliqDovb0s6L+b5bqm5p2h5pu057K+57uGXHJcbiAgICAgKiBAcGFyYW0gcmVzRnVsbE5hbWUg6LWE5rqQ5a6M5pW06Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gcHJvZ3Jhc3NGdW5jIGxvYWRpbmflh73mlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkUmVzQnlBc3NldHNSZWNvcmQocmVzRnVsbE5hbWU6IHN0cmluZywgcHJvZ3Jhc3NGdW5jOiBGdW5jdGlvbiA9IG51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgLy8gLiDliqDovb1Bc3NldHNSZWNvcmTmlofku7bvvIzovoPlsI/vvIzkuI3orqHlhaXov5vluqblgLxcclxuICAgICAgICBsZXQgYXJSZXMgPSB0aGlzLmdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFJlc0J5RnVsbE5hbWUoYXJSZXMpO1xyXG4gICAgICAgIGxldCBhckNvbmZpZyA9IFJFUy5nZXRSZXNCeUZ1bGxOYW1lKGFyUmVzKTtcclxuICAgICAgICBpZiAoIWFyQ29uZmlnIHx8IGFyQ29uZmlnLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAuIOe7hOe7h+imgeWKoOi9veeahOi1hOa6kOaWh+S7tlxyXG4gICAgICAgIGxldCByZXNBcnIgPSBbXTtcclxuICAgICAgICBsZXQgbnVtID0gcmVzRnVsbE5hbWUubGFzdEluZGV4T2YoJy8nKTtcclxuICAgICAgICBsZXQgcGFyZW50Rm9sZGVyID0gcmVzRnVsbE5hbWUuc3Vic3RyKDAsIG51bSkgKyAnLyc7XHJcbiAgICAgICAgZm9yIChsZXQgcmVzIG9mIGFyQ29uZmlnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzQXJyLnB1c2gocGFyZW50Rm9sZGVyICsgcmVzLnVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFJlc0J5RnVsbE5hbWUocmVzQXJyLCBwcm9ncmFzc0Z1bmMpO1xyXG4gICAgICAgIC8vIOacgOWQjuWGjeWKoOi9veW5tuWIm+W7uuiHqui6q++8iGxz44CBbGjvvInvvIzlhbblhoXpg6jotYTmupDlt7Lnu4/lnKjkuIrmlrnliqDovb3lrozkuoZcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRSZXNCeUZ1bGxOYW1lKHJlc0Z1bGxOYW1lKTtcclxuICAgIH1cclxuXHJcbn0iXX0=
