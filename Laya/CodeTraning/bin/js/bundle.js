var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
Object.defineProperty(exports, "__esModule", { value: true });
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "test/TestScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = true;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var GameUI_1 = require("./script/GameUI");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        // GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);
        new GameUI_1.default();
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1,"./script/GameUI":4}],3:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var CubeController = /** @class */ (function (_super) {
    __extends(CubeController, _super);
    function CubeController() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._rotateV3 = new Laya.Vector3(0, -0.01, 0);
        return _this;
    }
    CubeController.prototype.onAwake = function () {
        this._owner = this.owner;
    };
    CubeController.prototype.onUpdate = function () {
        this._owner.transform.rotate(this._rotateV3, true);
    };
    return CubeController;
}(Laya.Script));
exports.CubeController = CubeController;
},{}],4:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var CubeController_1 = require("./CubeController");
var Sprited3DMaterial_1 = require("./MaterialAndShader/Sprited3DMaterial");
var GameUI = /** @class */ (function () {
    function GameUI() {
        window['gu'] = this;
        Laya.Shader3D.debugMode = true;
        //添加3D场景
        var scene = Laya.stage.addChild(new Laya.Scene3D());
        //添加照相机
        var camera = (scene.addChild(new Laya.Camera(0, 0.1, 100)));
        camera.transform.translate(new Laya.Vector3(0, 3, 3));
        camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);
        //添加方向光
        var directionLight = scene.addChild(new Laya.DirectionLight());
        directionLight.color = new Laya.Vector3(0.6, 0.6, 0.6);
        directionLight.transform.worldMatrix.setForward(new Laya.Vector3(1, -1, 0));
        //添加自定义模型
        var box = scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1, 1, 1)));
        box.transform.rotate(new Laya.Vector3(0, 45, 0), false, false);
        box.addComponent(CubeController_1.CubeController);
        // var customMaterial: CustomMaterial = new CustomMaterial();
        // box.meshRenderer.sharedMaterial = customMaterial;
        // let spMat: Laya.UnlitMaterial = new Laya.UnlitMaterial();
        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, (tex) =>
        // {
        //     spMat.albedoTexture = tex;
        // }));
        // box.meshRenderer.material = spMat;
        this.setMat(box);
        // let material: Laya.BlinnPhongMaterial = new Laya.BlinnPhongMaterial();
        // Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, function (tex: Laya.Texture2D)
        // {
        //     material.albedoTexture = tex;
        // }));
        // box.meshRenderer.material = material;
    }
    GameUI.prototype.setMat = function (box) {
        return __awaiter(this, void 0, void 0, function () {
            var spMat;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        spMat = new Sprited3DMaterial_1.Sprited3DMaterial();
                        return [4 /*yield*/, spMat.compile()];
                    case 1:
                        _a.sent();
                        Laya.Texture2D.load("res/layabox.png", Laya.Handler.create(null, function (tex) {
                            spMat.albedoTexture = tex;
                        }));
                        // spMat.albedoColor = new Laya.Vector4(1, 0, 0, 1);
                        box.meshRenderer.material = spMat;
                        window['spMat'] = spMat;
                        return [2 /*return*/];
                }
            });
        });
    };
    return GameUI;
}());
exports.default = GameUI;
},{"./CubeController":3,"./MaterialAndShader/Sprited3DMaterial":5}],5:[function(require,module,exports){
"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var RES_1 = require("../RES");
var Sprited3DMaterial = /** @class */ (function (_super) {
    __extends(Sprited3DMaterial, _super);
    function Sprited3DMaterial() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Sprited3DMaterial.prototype.compile = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Sprited3DMaterial.initShader()];
                    case 1:
                        _a.sent();
                        this.setOpaqueRender();
                        this.setShaderName(Sprited3DMaterial.SHADER_NAME);
                        this.albedoColor = new Laya.Vector4(1, 1, 1, 1);
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(Sprited3DMaterial.prototype, "hideTex", {
        get: function () {
            return this._hideTex;
        },
        set: function (value) {
            this._hideTex = value;
            this._shaderValues.setBool(Sprited3DMaterial.HIDETEX, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Sprited3DMaterial.prototype, "albedoTexture", {
        get: function () {
            return this._shaderValues.getTexture(Sprited3DMaterial.ALBEDOTEXTURE);
        },
        set: function (value) {
            this._shaderValues.setTexture(Sprited3DMaterial.ALBEDOTEXTURE, value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Sprited3DMaterial.prototype, "albdoColor", {
        get: function () {
            return this._color;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Sprited3DMaterial.prototype, "albedoColor", {
        set: function (value) {
            this._color = value;
            this._shaderValues.setVector(Sprited3DMaterial.COLOR, value);
        },
        enumerable: true,
        configurable: true
    });
    Sprited3DMaterial.prototype.setOpaqueRender = function () {
        this.renderQueue = Laya.BaseMaterial.RENDERQUEUE_OPAQUE;
    };
    Sprited3DMaterial.initShader = function () {
        return __awaiter(this, void 0, void 0, function () {
            var attributeMap, uniformMap, vs, ps, spShader, subShader;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (Sprited3DMaterial.hasInit) {
                            return [2 /*return*/];
                        }
                        Sprited3DMaterial.hasInit = true;
                        Sprited3DMaterial.SHADERDEFINE_CULLOFF_ON = Sprited3DMaterial.shaderDefines.registerDefine("CULLOFF_ON");
                        attributeMap = {
                            'a_Position': Laya.VertexMesh.MESH_POSITION0,
                            'a_Texcoord0': Laya.VertexMesh.MESH_TEXTURECOORDINATE0
                        };
                        uniformMap = {
                            'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE,
                            'u_MainTex': Laya.Shader3D.PERIOD_MATERIAL,
                            'u_Color': Laya.Shader3D.PERIOD_MATERIAL,
                            'u_HideTex': Laya.Shader3D.PERIOD_MATERIAL
                        };
                        return [4 /*yield*/, RES_1.RESNormal.loadRes("Sprite3dShader/vs.glsl")];
                    case 1:
                        vs = _a.sent();
                        return [4 /*yield*/, RES_1.RESNormal.loadRes("Sprite3dShader/ps.glsl")];
                    case 2:
                        ps = _a.sent();
                        spShader = Laya.Shader3D.add(Sprited3DMaterial.SHADER_NAME);
                        subShader = new Laya.SubShader(attributeMap, uniformMap, Sprited3DMaterial.shaderDefines);
                        spShader.addSubShader(subShader);
                        subShader.addShaderPass(vs, ps);
                        return [2 /*return*/];
                }
            });
        });
    };
    Sprited3DMaterial.hasInit = false;
    Sprited3DMaterial.SHADER_NAME = "Sprited3DShader";
    Sprited3DMaterial.ALBEDOTEXTURE = Laya.Shader3D.propertyNameToID("u_MainTex");
    Sprited3DMaterial.COLOR = Laya.Shader3D.propertyNameToID("u_Color");
    Sprited3DMaterial.HIDETEX = Laya.Shader3D.propertyNameToID("u_HideTex");
    return Sprited3DMaterial;
}(Laya.BaseMaterial));
exports.Sprited3DMaterial = Sprited3DMaterial;
},{"../RES":6}],6:[function(require,module,exports){
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var la = Laya;
////普通资源类型////
var RES_PATH_ATLAS = "res/atlas"; //图集
var RES_PATH_IMAGE = "res/images"; //图片
var RES_PATH_CONFIG = "res/configs"; //配置文件
var RES_PATH_AUDIO = "res/sounds"; //音频,不能预先加载
var RES_PATH_VIEW = "res/view"; //导出的UI文件
var RES_PATH_ANIMATION = "res/animation"; // 动画文件
var RES_PATH_SHADER = "res/glsl"; // shader文件
////3D类型资源////
var RES_PATH_D3_SCENES = "res/d3/scenes"; //场景
var RES_PATH_D3_MODELS = "res/d3/models"; //模型
var RES_PATH_D3_OTHERS = "res/d3/others"; //其他
/**资源类型 */
var RES_TYPE;
(function (RES_TYPE) {
    RES_TYPE[RES_TYPE["normal"] = 0] = "normal";
    RES_TYPE[RES_TYPE["d3"] = 1] = "d3"; //3d资源，场景，模型等,3d资源用RES3D加载
})(RES_TYPE = exports.RES_TYPE || (exports.RES_TYPE = {}));
/**资源封装类 */
var RES = /** @class */ (function () {
    function RES() {
    }
    /**
     * 根据资源民称后缀拼接资源真实路径，资源需要按照规定位置存放
     * 参数如: 1.jpg
     */
    RES.joinResPath = function (resName) {
        // 如果已经是全路径，就不做凭拼接
        if (resName.indexOf("res/") >= 0) {
            return resName;
        }
        var path = "";
        var suffix = la.Utils.getFileExtension(resName);
        switch (suffix) {
            case "atlas":
                path = RES_PATH_ATLAS;
                // 对序列帧动画做专门处理
                if (resName.indexOf("anim") >= 0) {
                    path = RES_PATH_ANIMATION;
                }
                break;
            case "png":
            case "jpg":
            case "jpeg":
                path = RES_PATH_IMAGE;
                break;
            case "json":
            case "xml":
                path = RES_PATH_CONFIG;
                break;
            case "mp3":
            case "wav":
                path = RES_PATH_AUDIO;
                break;
            case "sk":
                path = RES_PATH_ANIMATION;
                break;
            case "scene":
                path = RES_PATH_VIEW;
                break;
            case "ls":
                path = RES_PATH_D3_SCENES;
                break;
            case "lh":
                path = RES_PATH_D3_MODELS;
                break;
            case "glsl":
                path = RES_PATH_SHADER;
                break;
            default:
                break;
        }
        var res = path + "/" + resName;
        return res;
    };
    /**
     * 获取资源的完整路径
     * @param _resName 资源局部路径
     */
    RES.getFullResPath = function (_resName) {
        return this.joinResPath(_resName);
    };
    /**
     * 获取资源，资源需要已经加载过，否则返回空
     * @param resName 资源局部路径，例如: scene1/scene1.ls
     */
    RES.getRes = function (resName) {
        var resFullName = this.joinResPath(resName);
        return this.getResByFullName(resFullName);
    };
    /**
     * 获取资源，资源需要已经加载过，否则返回空
     * @param resName 资源完整路径
     */
    RES.getResByFullName = function (resFullName) {
        var res = la.loader.getRes(resFullName);
        return res;
    };
    /**
     * 完全清除一个资源，注意：3d资源通过这个只能清除一层壳，3d资源的管理只能通过AssetRecord文件来做
     * @param resName 资源局部路径
     */
    RES.clearRes = function (resName) {
        var resFullName = this.joinResPath(resName);
        this.clearResByFullName(resFullName);
    };
    /**
     * 完全清除一个资源，注意：3d资源通过这个只能清除一层壳，3d资源的管理只能通过AssetRecord文件来做
     * @param resName 资源完整路径
     */
    RES.clearResByFullName = function (resFullName) {
        // lg.info(TG_RES, "clearResByFullName %o", resFullName);
        Laya.Loader.clearRes(resFullName);
    };
    return RES;
}());
exports.default = RES;
/**普通资源加载封装 */
var RESNormal = /** @class */ (function () {
    function RESNormal() {
    }
    /**
     * 获得一张图集中的图片,图集需要已加载过，否则回空
     * @param atlasName 图集名称
     * @param imgName 图片名称
     */
    RESNormal.getImageFromAtlas = function (atlasName, imgName) {
        var fullPath = atlasName + "/" + imgName;
        return RES.getResByFullName(fullPath);
    };
    /**
     * 加载单个资源,图集、图片、配置表等
     * @param _resName 资源局部路径，例如: bg.png
     * @param _needMgr 是否归于场景管理
     */
    RESNormal.loadRes = function (_resName, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_path;
            return __generator(this, function (_a) {
                real_path = RES.joinResPath(_resName);
                if (!real_path)
                    return [2 /*return*/, null];
                return [2 /*return*/, this.loadResByFullName(real_path)];
            });
        });
    };
    /**
     * 加载资源组
     * @param _resArr 资源组数组，每个资源都是局部路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESNormal.loadGroupAsync = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_res_arr, _i, _resArr_1, res_name, real_name;
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                real_res_arr = [];
                for (_i = 0, _resArr_1 = _resArr; _i < _resArr_1.length; _i++) {
                    res_name = _resArr_1[_i];
                    real_name = RES.joinResPath(res_name);
                    real_res_arr.push(real_name);
                }
                return [2 /*return*/, this.loadResByFullName(real_res_arr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载资源,使用完整路径
     * @param _resName 完整资源路径或资源组名
     * @param prograssFunc 进度回调，带一个参数（0-1）
     */
    RESNormal.loadResByFullName = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var prograssHandler, progress_handler;
            var _this = this;
            return __generator(this, function (_a) {
                if (!resFullName)
                    return [2 /*return*/];
                prograssHandler = null;
                progress_handler = null;
                if (prograssFunc) {
                    progress_handler = la.Handler.create(this, prograssFunc, null, false);
                }
                return [2 /*return*/, new Promise(function (resolve) {
                        la.loader.load(resFullName, la.Handler.create(_this, function (_res) {
                            // lg.info(TG_RES, "loadResFull normal over %o", resFullName);
                            resolve(_res);
                        }), progress_handler);
                    })];
            });
        });
    };
    return RESNormal;
}());
exports.RESNormal = RESNormal;
/**3d资源加载封装 */
var RESD3 = /** @class */ (function () {
    function RESD3() {
    }
    /**
     * 根据lh、ls资源名称，获取对应的AssetsRecord文件路径
     * @param resName 场景或模型资源的局部路径
     */
    RESD3.getAssetsRecord = function (resName) {
        var resFullName = RES.joinResPath(resName);
        return this.getAssetsRecordByResFullName(resFullName);
    };
    /**
     * 根据lh、ls资源名称，获取对应的AssetsRecord文件路径
     * @param resFullName 场景或模型资源的完整路径
     */
    RESD3.getAssetsRecordByResFullName = function (resFullName) {
        var num = resFullName.lastIndexOf('/');
        var parentFolder = resFullName.substr(0, num);
        var assetsRecordUrl = parentFolder + "/AssetsRecord.json";
        return assetsRecordUrl;
    };
    /**
     * 获取某个已加载过的3d物体的克隆
     * @param _resName 局部路径
     */
    RESD3.getSprited3DClone = function (resName) {
        var spriteModel = RES.getRes(resName);
        return spriteModel.clone();
    };
    /**
     * 加载3D资源,使用完整路径
     * @param resFullName 资源局部路径
     * @param prograssFunc loading函数
     */
    RESD3.loadRes = function (resName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var resFullName;
            return __generator(this, function (_a) {
                resFullName = RES.getFullResPath(resName);
                return [2 /*return*/, this.loadResByFullName(resFullName, prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源组
     * @param _resArr 资源组数组，所有资源都是局部路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESD3.loadGroupAsync = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var real_res_arr, _i, _resArr_2, res_name, real_name;
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                real_res_arr = [];
                for (_i = 0, _resArr_2 = _resArr; _i < _resArr_2.length; _i++) {
                    res_name = _resArr_2[_i];
                    real_name = RES.joinResPath(res_name);
                    real_res_arr.push(real_name);
                }
                return [2 /*return*/, this.loadResByFullName(real_res_arr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源组
     * @param _resArr 资源组数组，所有资源都是完整路径
     * @param _prograssFunc 进度回调，带一个参数（0-1）
     */
    RESD3.loadGroupAsyncByFullName = function (_resArr, _prograssFunc) {
        if (_prograssFunc === void 0) { _prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (!_resArr || _resArr.length <= 0) {
                    return [2 /*return*/, false];
                }
                return [2 /*return*/, this.loadResByFullName(_resArr, _prograssFunc)];
            });
        });
    };
    /**
     * 加载3D资源,使用完整路径
     * @param resFullName 资源完整路径
     * @param prograssFunc loading函数
     */
    RESD3.loadResByFullName = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var prograssHandler, progress_handler;
            var _this = this;
            return __generator(this, function (_a) {
                if (!resFullName)
                    return [2 /*return*/];
                prograssHandler = null;
                progress_handler = null;
                if (prograssFunc) {
                    progress_handler = la.Handler.create(this, prograssFunc, null, false);
                }
                return [2 /*return*/, new Promise(function (resolve) {
                        la.loader.create(resFullName, la.Handler.create(_this, function () {
                            // lg.info(TG_RES, "loadResByFullName 3d over %o", resFullName);
                            resolve();
                        }), progress_handler);
                    })];
            });
        });
    };
    /**
     * 加载3D资源,基于AssetsRecord加载,进度条更精细
     * @param resFullName 资源完整路径
     * @param prograssFunc loading函数
     */
    RESD3.loadResByAssetsRecord = function (resFullName, prograssFunc) {
        if (prograssFunc === void 0) { prograssFunc = null; }
        return __awaiter(this, void 0, void 0, function () {
            var arRes, arConfig, resArr, num, parentFolder, _i, arConfig_1, res;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        arRes = this.getAssetsRecordByResFullName(resFullName);
                        return [4 /*yield*/, this.loadResByFullName(arRes)];
                    case 1:
                        _a.sent();
                        arConfig = RES.getResByFullName(arRes);
                        if (!arConfig || arConfig.length <= 0) {
                            return [2 /*return*/];
                        }
                        resArr = [];
                        num = resFullName.lastIndexOf('/');
                        parentFolder = resFullName.substr(0, num) + '/';
                        for (_i = 0, arConfig_1 = arConfig; _i < arConfig_1.length; _i++) {
                            res = arConfig_1[_i];
                            resArr.push(parentFolder + res.url);
                        }
                        return [4 /*yield*/, this.loadResByFullName(resArr, prograssFunc)];
                    case 2:
                        _a.sent();
                        // 最后再加载并创建自身（ls、lh），其内部资源已经在上方加载完了
                        return [4 /*yield*/, this.loadResByFullName(resFullName)];
                    case 3:
                        // 最后再加载并创建自身（ls、lh），其内部资源已经在上方加载完了
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return RESD3;
}());
exports.RESD3 = RESD3;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NvZnQvbGF5YTIvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9zY3JpcHQvQ3ViZUNvbnRyb2xsZXIudHMiLCJzcmMvc2NyaXB0L0dhbWVVSS50cyIsInNyYy9zY3JpcHQvTWF0ZXJpYWxBbmRTaGFkZXIvU3ByaXRlZDNETWF0ZXJpYWwudHMiLCJzcmMvc2NyaXB0L1JFUy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBLGdHQUFnRzs7QUFFaEc7O0VBRUU7QUFDRjtJQWFJO0lBQWMsQ0FBQztJQUNSLGVBQUksR0FBWDtRQUNJLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO0lBRWpELENBQUM7SUFoQk0sZ0JBQUssR0FBUSxHQUFHLENBQUM7SUFDakIsaUJBQU0sR0FBUSxJQUFJLENBQUM7SUFDbkIsb0JBQVMsR0FBUSxZQUFZLENBQUM7SUFDOUIscUJBQVUsR0FBUSxNQUFNLENBQUM7SUFDekIsaUJBQU0sR0FBUSxLQUFLLENBQUM7SUFDcEIsaUJBQU0sR0FBUSxNQUFNLENBQUM7SUFDckIscUJBQVUsR0FBSyxzQkFBc0IsQ0FBQztJQUN0QyxvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsSUFBSSxDQUFDO0lBQ2xCLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNCLDRCQUFpQixHQUFTLElBQUksQ0FBQztJQU0xQyxpQkFBQztDQWxCRCxBQWtCQyxJQUFBO2tCQWxCb0IsVUFBVTtBQW1CL0IsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDOzs7O0FDeEJsQiwyQ0FBc0M7QUFDdEMsMENBQXFDO0FBQ3JD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c0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuXHJcbi8qXHJcbiog5ri45oiP5Yid5aeL5YyW6YWN572uO1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlne1xyXG4gICAgc3RhdGljIHdpZHRoOm51bWJlcj02NDA7XHJcbiAgICBzdGF0aWMgaGVpZ2h0Om51bWJlcj0xMTM2O1xyXG4gICAgc3RhdGljIHNjYWxlTW9kZTpzdHJpbmc9XCJmaXhlZHdpZHRoXCI7XHJcbiAgICBzdGF0aWMgc2NyZWVuTW9kZTpzdHJpbmc9XCJub25lXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25WOnN0cmluZz1cInRvcFwiO1xyXG4gICAgc3RhdGljIGFsaWduSDpzdHJpbmc9XCJsZWZ0XCI7XHJcbiAgICBzdGF0aWMgc3RhcnRTY2VuZTphbnk9XCJ0ZXN0L1Rlc3RTY2VuZS5zY2VuZVwiO1xyXG4gICAgc3RhdGljIHNjZW5lUm9vdDpzdHJpbmc9XCJcIjtcclxuICAgIHN0YXRpYyBkZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHN0YXQ6Ym9vbGVhbj10cnVlO1xyXG4gICAgc3RhdGljIHBoeXNpY3NEZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIGV4cG9ydFNjZW5lVG9Kc29uOmJvb2xlYW49dHJ1ZTtcclxuICAgIGNvbnN0cnVjdG9yKCl7fVxyXG4gICAgc3RhdGljIGluaXQoKXtcclxuICAgICAgICB2YXIgcmVnOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuXHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy5pbml0KCk7IiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5pbXBvcnQgR2FtZVVJIGZyb20gXCIuL3NjcmlwdC9HYW1lVUlcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBHYW1lQ29uZmlnLnNjcmVlbk1vZGU7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHQvLyBHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0XHRuZXcgR2FtZVVJKCk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsImV4cG9ydCBjbGFzcyBDdWJlQ29udHJvbGxlciBleHRlbmRzIExheWEuU2NyaXB0XHJcbntcclxuICAgIHByaXZhdGUgX293bmVyOiBMYXlhLlNwcml0ZTNEO1xyXG5cclxuICAgIG9uQXdha2UoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX293bmVyID0gdGhpcy5vd25lciBhcyBMYXlhLlNwcml0ZTNEO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3JvdGF0ZVYzID0gbmV3IExheWEuVmVjdG9yMygwLCAtMC4wMSwgMCk7XHJcbiAgICBvblVwZGF0ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fb3duZXIudHJhbnNmb3JtLnJvdGF0ZSh0aGlzLl9yb3RhdGVWMywgdHJ1ZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyB1aSB9IGZyb20gXCIuLy4uL3VpL2xheWFNYXhVSVwiO1xyXG5pbXBvcnQgUkVTLCB7IFJFU0QzIH0gZnJvbSBcIi4vUkVTXCI7XHJcbmltcG9ydCB7IEN1YmVDb250cm9sbGVyIH0gZnJvbSBcIi4vQ3ViZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgQ3VzdG9tTWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbEFuZFNoYWRlci9DdXN0b21NYXRlcmlhbFwiO1xyXG5pbXBvcnQgeyBTcHJpdGVkM0RNYXRlcmlhbCB9IGZyb20gXCIuL01hdGVyaWFsQW5kU2hhZGVyL1Nwcml0ZWQzRE1hdGVyaWFsXCI7XHJcbmltcG9ydCB7IFVubGl0TWF0ZXJpYWwgfSBmcm9tIFwiLi9NYXRlcmlhbEFuZFNoYWRlci9VbmxpdE1hdGVyaWFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVUlcclxue1xyXG4gICAgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHdpbmRvd1snZ3UnXSA9IHRoaXM7XHJcblxyXG4gICAgICAgIExheWEuU2hhZGVyM0QuZGVidWdNb2RlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy/mt7vliqAzROWcuuaZr1xyXG4gICAgICAgIGxldCBzY2VuZTogTGF5YS5TY2VuZTNEID0gTGF5YS5zdGFnZS5hZGRDaGlsZChuZXcgTGF5YS5TY2VuZTNEKCkpIGFzIExheWEuU2NlbmUzRDtcclxuXHJcbiAgICAgICAgLy/mt7vliqDnhafnm7jmnLpcclxuICAgICAgICBsZXQgY2FtZXJhOiBMYXlhLkNhbWVyYSA9IChzY2VuZS5hZGRDaGlsZChuZXcgTGF5YS5DYW1lcmEoMCwgMC4xLCAxMDApKSkgYXMgTGF5YS5DYW1lcmE7XHJcbiAgICAgICAgY2FtZXJhLnRyYW5zZm9ybS50cmFuc2xhdGUobmV3IExheWEuVmVjdG9yMygwLCAzLCAzKSk7XHJcbiAgICAgICAgY2FtZXJhLnRyYW5zZm9ybS5yb3RhdGUobmV3IExheWEuVmVjdG9yMygtMzAsIDAsIDApLCB0cnVlLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8v5re75Yqg5pa55ZCR5YWJXHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbkxpZ2h0OiBMYXlhLkRpcmVjdGlvbkxpZ2h0ID0gc2NlbmUuYWRkQ2hpbGQobmV3IExheWEuRGlyZWN0aW9uTGlnaHQoKSkgYXMgTGF5YS5EaXJlY3Rpb25MaWdodDtcclxuICAgICAgICBkaXJlY3Rpb25MaWdodC5jb2xvciA9IG5ldyBMYXlhLlZlY3RvcjMoMC42LCAwLjYsIDAuNik7XHJcbiAgICAgICAgZGlyZWN0aW9uTGlnaHQudHJhbnNmb3JtLndvcmxkTWF0cml4LnNldEZvcndhcmQobmV3IExheWEuVmVjdG9yMygxLCAtMSwgMCkpO1xyXG5cclxuICAgICAgICAvL+a3u+WKoOiHquWumuS5ieaooeWei1xyXG4gICAgICAgIGxldCBib3g6IExheWEuTWVzaFNwcml0ZTNEID0gc2NlbmUuYWRkQ2hpbGQobmV3IExheWEuTWVzaFNwcml0ZTNEKExheWEuUHJpbWl0aXZlTWVzaC5jcmVhdGVCb3goMSwgMSwgMSkpKSBhcyBMYXlhLk1lc2hTcHJpdGUzRDtcclxuICAgICAgICBib3gudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKDAsIDQ1LCAwKSwgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICBib3guYWRkQ29tcG9uZW50KEN1YmVDb250cm9sbGVyKTtcclxuXHJcbiAgICAgICAgLy8gdmFyIGN1c3RvbU1hdGVyaWFsOiBDdXN0b21NYXRlcmlhbCA9IG5ldyBDdXN0b21NYXRlcmlhbCgpO1xyXG4gICAgICAgIC8vIGJveC5tZXNoUmVuZGVyZXIuc2hhcmVkTWF0ZXJpYWwgPSBjdXN0b21NYXRlcmlhbDtcclxuXHJcbiAgICAgICAgLy8gbGV0IHNwTWF0OiBMYXlhLlVubGl0TWF0ZXJpYWwgPSBuZXcgTGF5YS5VbmxpdE1hdGVyaWFsKCk7XHJcbiAgICAgICAgLy8gTGF5YS5UZXh0dXJlMkQubG9hZChcInJlcy9sYXlhYm94LnBuZ1wiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKG51bGwsICh0ZXgpID0+XHJcbiAgICAgICAgLy8ge1xyXG4gICAgICAgIC8vICAgICBzcE1hdC5hbGJlZG9UZXh0dXJlID0gdGV4O1xyXG4gICAgICAgIC8vIH0pKTtcclxuICAgICAgICAvLyBib3gubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gc3BNYXQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0TWF0KGJveCk7XHJcblxyXG4gICAgICAgIC8vIGxldCBtYXRlcmlhbDogTGF5YS5CbGlublBob25nTWF0ZXJpYWwgPSBuZXcgTGF5YS5CbGlublBob25nTWF0ZXJpYWwoKTtcclxuICAgICAgICAvLyBMYXlhLlRleHR1cmUyRC5sb2FkKFwicmVzL2xheWFib3gucG5nXCIsIExheWEuSGFuZGxlci5jcmVhdGUobnVsbCwgZnVuY3Rpb24gKHRleDogTGF5YS5UZXh0dXJlMkQpXHJcbiAgICAgICAgLy8ge1xyXG4gICAgICAgIC8vICAgICBtYXRlcmlhbC5hbGJlZG9UZXh0dXJlID0gdGV4O1xyXG4gICAgICAgIC8vIH0pKTtcclxuICAgICAgICAvLyBib3gubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gbWF0ZXJpYWw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBzZXRNYXQoYm94KVxyXG4gICAge1xyXG4gICAgICAgIC8vIGxldCBzcE1hdDogVW5saXRNYXRlcmlhbCA9IG5ldyBVbmxpdE1hdGVyaWFsKCk7XHJcbiAgICAgICAgLy8gYXdhaXQgc3BNYXQuY29tcGlsZSgpO1xyXG4gICAgICAgIC8vIExheWEuVGV4dHVyZTJELmxvYWQoXCJyZXMvbGF5YWJveC5wbmdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZShudWxsLCAodGV4KSA9PlxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgc3BNYXQuYWxiZWRvVGV4dHVyZSA9IHRleDtcclxuICAgICAgICAvLyB9KSk7XHJcbiAgICAgICAgLy8gYm94Lm1lc2hSZW5kZXJlci5tYXRlcmlhbCA9IHNwTWF0O1xyXG5cclxuICAgICAgICBsZXQgc3BNYXQ6IFNwcml0ZWQzRE1hdGVyaWFsID0gbmV3IFNwcml0ZWQzRE1hdGVyaWFsKCk7XHJcbiAgICAgICAgYXdhaXQgc3BNYXQuY29tcGlsZSgpO1xyXG4gICAgICAgIExheWEuVGV4dHVyZTJELmxvYWQoXCJyZXMvbGF5YWJveC5wbmdcIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZShudWxsLCAodGV4KSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3BNYXQuYWxiZWRvVGV4dHVyZSA9IHRleDtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gc3BNYXQuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KDEsIDAsIDAsIDEpO1xyXG4gICAgICAgIGJveC5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSBzcE1hdDtcclxuXHJcblxyXG4gICAgICAgIHdpbmRvd1snc3BNYXQnXSA9IHNwTWF0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUkVTTm9ybWFsIH0gZnJvbSBcIi4uL1JFU1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwcml0ZWQzRE1hdGVyaWFsIGV4dGVuZHMgTGF5YS5CYXNlTWF0ZXJpYWxcclxue1xyXG4gICAgc3RhdGljIGhhc0luaXQgPSBmYWxzZTtcclxuICAgIHN0YXRpYyBTSEFERVJfTkFNRSA9IFwiU3ByaXRlZDNEU2hhZGVyXCI7XHJcbiAgICBzdGF0aWMgU0hBREVSREVGSU5FX0NVTExPRkZfT047XHJcbiAgICBzdGF0aWMgQUxCRURPVEVYVFVSRTogbnVtYmVyID0gTGF5YS5TaGFkZXIzRC5wcm9wZXJ0eU5hbWVUb0lEKFwidV9NYWluVGV4XCIpO1xyXG4gICAgc3RhdGljIENPTE9SOiBudW1iZXIgPSBMYXlhLlNoYWRlcjNELnByb3BlcnR5TmFtZVRvSUQoXCJ1X0NvbG9yXCIpO1xyXG4gICAgc3RhdGljIEhJREVURVg6IG51bWJlciA9IExheWEuU2hhZGVyM0QucHJvcGVydHlOYW1lVG9JRChcInVfSGlkZVRleFwiKTtcclxuXHJcbiAgICBwcml2YXRlIF9jb2xvcjogTGF5YS5WZWN0b3I0O1xyXG4gICAgcHJpdmF0ZSBfaGlkZVRleDogYm9vbGVhbjtcclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY29tcGlsZSgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgU3ByaXRlZDNETWF0ZXJpYWwuaW5pdFNoYWRlcigpO1xyXG4gICAgICAgIHRoaXMuc2V0T3BhcXVlUmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRTaGFkZXJOYW1lKFNwcml0ZWQzRE1hdGVyaWFsLlNIQURFUl9OQU1FKTtcclxuICAgICAgICB0aGlzLmFsYmVkb0NvbG9yID0gbmV3IExheWEuVmVjdG9yNCgxLCAxLCAxLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhpZGVUZXgoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9oaWRlVGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgaGlkZVRleCh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9oaWRlVGV4ID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fc2hhZGVyVmFsdWVzLnNldEJvb2woU3ByaXRlZDNETWF0ZXJpYWwuSElERVRFWCwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgYWxiZWRvVGV4dHVyZSgpOiBMYXlhLkJhc2VUZXh0dXJlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYWRlclZhbHVlcy5nZXRUZXh0dXJlKFNwcml0ZWQzRE1hdGVyaWFsLkFMQkVET1RFWFRVUkUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgYWxiZWRvVGV4dHVyZSh2YWx1ZSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9zaGFkZXJWYWx1ZXMuc2V0VGV4dHVyZShTcHJpdGVkM0RNYXRlcmlhbC5BTEJFRE9URVhUVVJFLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBhbGJkb0NvbG9yKCk6IExheWEuVmVjdG9yNFxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGFsYmVkb0NvbG9yKHZhbHVlOiBMYXlhLlZlY3RvcjQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fY29sb3IgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9zaGFkZXJWYWx1ZXMuc2V0VmVjdG9yKFNwcml0ZWQzRE1hdGVyaWFsLkNPTE9SLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldE9wYXF1ZVJlbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJRdWV1ZSA9IExheWEuQmFzZU1hdGVyaWFsLlJFTkRFUlFVRVVFX09QQVFVRTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgaW5pdFNoYWRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKFNwcml0ZWQzRE1hdGVyaWFsLmhhc0luaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFNwcml0ZWQzRE1hdGVyaWFsLmhhc0luaXQgPSB0cnVlO1xyXG5cclxuICAgICAgICBTcHJpdGVkM0RNYXRlcmlhbC5TSEFERVJERUZJTkVfQ1VMTE9GRl9PTiA9IFNwcml0ZWQzRE1hdGVyaWFsLnNoYWRlckRlZmluZXMucmVnaXN0ZXJEZWZpbmUoXCJDVUxMT0ZGX09OXCIpO1xyXG5cclxuICAgICAgICBsZXQgYXR0cmlidXRlTWFwID1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJ2FfUG9zaXRpb24nOiBMYXlhLlZlcnRleE1lc2guTUVTSF9QT1NJVElPTjAsXHJcbiAgICAgICAgICAgICAgICAnYV9UZXhjb29yZDAnOiBMYXlhLlZlcnRleE1lc2guTUVTSF9URVhUVVJFQ09PUkRJTkFURTBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICBsZXQgdW5pZm9ybU1hcCA9XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICd1X012cE1hdHJpeCc6IExheWEuU2hhZGVyM0QuUEVSSU9EX1NQUklURSxcclxuICAgICAgICAgICAgICAgICd1X01haW5UZXgnOiBMYXlhLlNoYWRlcjNELlBFUklPRF9NQVRFUklBTCxcclxuICAgICAgICAgICAgICAgICd1X0NvbG9yJzogTGF5YS5TaGFkZXIzRC5QRVJJT0RfTUFURVJJQUwsXHJcbiAgICAgICAgICAgICAgICAndV9IaWRlVGV4JzogTGF5YS5TaGFkZXIzRC5QRVJJT0RfTUFURVJJQUxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHZzID0gYXdhaXQgUkVTTm9ybWFsLmxvYWRSZXMoXCJTcHJpdGUzZFNoYWRlci92cy5nbHNsXCIpO1xyXG4gICAgICAgIGxldCBwcyA9IGF3YWl0IFJFU05vcm1hbC5sb2FkUmVzKFwiU3ByaXRlM2RTaGFkZXIvcHMuZ2xzbFwiKTtcclxuXHJcbiAgICAgICAgbGV0IHNwU2hhZGVyOiBMYXlhLlNoYWRlcjNEID0gTGF5YS5TaGFkZXIzRC5hZGQoU3ByaXRlZDNETWF0ZXJpYWwuU0hBREVSX05BTUUpO1xyXG4gICAgICAgIGxldCBzdWJTaGFkZXI6IExheWEuU3ViU2hhZGVyID0gbmV3IExheWEuU3ViU2hhZGVyKGF0dHJpYnV0ZU1hcCwgdW5pZm9ybU1hcCwgU3ByaXRlZDNETWF0ZXJpYWwuc2hhZGVyRGVmaW5lcyk7XHJcbiAgICAgICAgc3BTaGFkZXIuYWRkU3ViU2hhZGVyKHN1YlNoYWRlcik7XHJcbiAgICAgICAgc3ViU2hhZGVyLmFkZFNoYWRlclBhc3ModnMsIHBzKTtcclxuICAgIH1cclxufSIsImxldCBsYSA9IExheWE7XHJcblxyXG4vLy8v5pmu6YCa6LWE5rqQ57G75Z6LLy8vL1xyXG5jb25zdCBSRVNfUEFUSF9BVExBUzogc3RyaW5nID0gXCJyZXMvYXRsYXNcIjtcdFx0Ly/lm77pm4ZcclxuY29uc3QgUkVTX1BBVEhfSU1BR0U6IHN0cmluZyA9IFwicmVzL2ltYWdlc1wiO1x0Ly/lm77niYdcclxuY29uc3QgUkVTX1BBVEhfQ09ORklHOiBzdHJpbmcgPSBcInJlcy9jb25maWdzXCI7XHQvL+mFjee9ruaWh+S7tlxyXG5jb25zdCBSRVNfUEFUSF9BVURJTzogc3RyaW5nID0gXCJyZXMvc291bmRzXCI7ICAgXHQvL+mfs+mikSzkuI3og73pooTlhYjliqDovb1cclxuY29uc3QgUkVTX1BBVEhfVklFVzogc3RyaW5nID0gXCJyZXMvdmlld1wiOyAgICAgICAvL+WvvOWHuueahFVJ5paH5Lu2XHJcbmNvbnN0IFJFU19QQVRIX0FOSU1BVElPTjogc3RyaW5nID0gXCJyZXMvYW5pbWF0aW9uXCI7IC8vIOWKqOeUu+aWh+S7tlxyXG5jb25zdCBSRVNfUEFUSF9TSEFERVI6IHN0cmluZyA9IFwicmVzL2dsc2xcIjsgICAgIC8vIHNoYWRlcuaWh+S7tlxyXG4vLy8vM0TnsbvlnovotYTmupAvLy8vXHJcbmNvbnN0IFJFU19QQVRIX0QzX1NDRU5FUzogc3RyaW5nID0gXCJyZXMvZDMvc2NlbmVzXCI7XHQvL+WcuuaZr1xyXG5jb25zdCBSRVNfUEFUSF9EM19NT0RFTFM6IHN0cmluZyA9IFwicmVzL2QzL21vZGVsc1wiO1x0Ly/mqKHlnotcclxuY29uc3QgUkVTX1BBVEhfRDNfT1RIRVJTOiBzdHJpbmcgPSBcInJlcy9kMy9vdGhlcnNcIjtcdC8v5YW25LuWXHJcblxyXG4vKirotYTmupDnsbvlnosgKi9cclxuZXhwb3J0IGVudW0gUkVTX1RZUEVcclxue1xyXG4gICAgbm9ybWFsLFx0Ly/mma7pgJrnsbvlnovvvIzlm77pm4bvvIzlm77niYfvvIzphY3nva7mlofku7bnrYlcclxuICAgIGQzXHRcdC8vM2TotYTmupDvvIzlnLrmma/vvIzmqKHlnovnrYksM2TotYTmupDnlKhSRVMzROWKoOi9vVxyXG59XHJcblxyXG4vKirotYTmupDlsIHoo4XnsbsgKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUkVTXHJcbntcclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u6LWE5rqQ5rCR56ew5ZCO57yA5ou85o6l6LWE5rqQ55yf5a6e6Lev5b6E77yM6LWE5rqQ6ZyA6KaB5oyJ54Wn6KeE5a6a5L2N572u5a2Y5pS+XHJcbiAgICAgKiDlj4LmlbDlpoI6IDEuanBnXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgam9pblJlc1BhdGgocmVzTmFtZTogc3RyaW5nKTogc3RyaW5nXHJcbiAgICB7XHJcbiAgICAgICAgLy8g5aaC5p6c5bey57uP5piv5YWo6Lev5b6E77yM5bCx5LiN5YGa5Yet5ou85o6lXHJcbiAgICAgICAgaWYgKHJlc05hbWUuaW5kZXhPZihcInJlcy9cIikgPj0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGF0aCA9IFwiXCI7XHJcbiAgICAgICAgbGV0IHN1ZmZpeCA9IGxhLlV0aWxzLmdldEZpbGVFeHRlbnNpb24ocmVzTmFtZSk7XHJcbiAgICAgICAgc3dpdGNoIChzdWZmaXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIFwiYXRsYXNcIjpcclxuICAgICAgICAgICAgICAgIHBhdGggPSBSRVNfUEFUSF9BVExBUztcclxuICAgICAgICAgICAgICAgIC8vIOWvueW6j+WIl+W4p+WKqOeUu+WBmuS4k+mXqOWkhOeQhlxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc05hbWUuaW5kZXhPZihcImFuaW1cIikgPj0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQU5JTUFUSU9OO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwbmdcIjpcclxuICAgICAgICAgICAgY2FzZSBcImpwZ1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwianBlZ1wiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX0lNQUdFO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJqc29uXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJ4bWxcIjpcclxuICAgICAgICAgICAgICAgIHBhdGggPSBSRVNfUEFUSF9DT05GSUc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIm1wM1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwid2F2XCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQVVESU87XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNrXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfQU5JTUFUSU9OO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzY2VuZVwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX1ZJRVc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxzXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUkVTX1BBVEhfRDNfU0NFTkVTO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaFwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX0QzX01PREVMUztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZ2xzbFwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJFU19QQVRIX1NIQURFUjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXMgPSBgJHtwYXRofS8ke3Jlc05hbWV9YDtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W6LWE5rqQ55qE5a6M5pW06Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gX3Jlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnVsbFJlc1BhdGgoX3Jlc05hbWU6IHN0cmluZyk6IHN0cmluZ1xyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmpvaW5SZXNQYXRoKF9yZXNOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlui1hOa6kO+8jOi1hOa6kOmcgOimgeW3sue7j+WKoOi9vei/h++8jOWQpuWImei/lOWbnuepulxyXG4gICAgICogQHBhcmFtIHJlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6E77yM5L6L5aaCOiBzY2VuZTEvc2NlbmUxLmxzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmVzKHJlc05hbWU6IHN0cmluZyk6IGFueVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IHRoaXMuam9pblJlc1BhdGgocmVzTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzQnlGdWxsTmFtZShyZXNGdWxsTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5botYTmupDvvIzotYTmupDpnIDopoHlt7Lnu4/liqDovb3ov4fvvIzlkKbliJnov5Tlm57nqbpcclxuICAgICAqIEBwYXJhbSByZXNOYW1lIOi1hOa6kOWujOaVtOi3r+W+hFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBsZXQgcmVzID0gbGEubG9hZGVyLmdldFJlcyhyZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWujOWFqOa4hemZpOS4gOS4qui1hOa6kO+8jOazqOaEj++8mjNk6LWE5rqQ6YCa6L+H6L+Z5Liq5Y+q6IO95riF6Zmk5LiA5bGC5aOz77yMM2TotYTmupDnmoTnrqHnkIblj6rog73pgJrov4dBc3NldFJlY29yZOaWh+S7tuadpeWBmlxyXG4gICAgICogQHBhcmFtIHJlc05hbWUg6LWE5rqQ5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXJSZXMocmVzTmFtZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IHRoaXMuam9pblJlc1BhdGgocmVzTmFtZSk7XHJcbiAgICAgICAgdGhpcy5jbGVhclJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5a6M5YWo5riF6Zmk5LiA5Liq6LWE5rqQ77yM5rOo5oSP77yaM2TotYTmupDpgJrov4fov5nkuKrlj6rog73muIXpmaTkuIDlsYLlo7PvvIwzZOi1hOa6kOeahOeuoeeQhuWPquiDvemAmui/h0Fzc2V0UmVjb3Jk5paH5Lu25p2l5YGaXHJcbiAgICAgKiBAcGFyYW0gcmVzTmFtZSDotYTmupDlrozmlbTot6/lvoRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGVhclJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJjbGVhclJlc0J5RnVsbE5hbWUgJW9cIiwgcmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIExheWEuTG9hZGVyLmNsZWFyUmVzKHJlc0Z1bGxOYW1lKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKuaZrumAmui1hOa6kOWKoOi9veWwgeijhSAqL1xyXG5leHBvcnQgY2xhc3MgUkVTTm9ybWFsXHJcbntcclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5LiA5byg5Zu+6ZuG5Lit55qE5Zu+54mHLOWbvumbhumcgOimgeW3suWKoOi9vei/h++8jOWQpuWImeWbnuepulxyXG4gICAgICogQHBhcmFtIGF0bGFzTmFtZSDlm77pm4blkI3np7BcclxuICAgICAqIEBwYXJhbSBpbWdOYW1lIOWbvueJh+WQjeensFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEltYWdlRnJvbUF0bGFzKGF0bGFzTmFtZTogc3RyaW5nLCBpbWdOYW1lOiBzdHJpbmcpOiBsYXlhLnJlc291cmNlLlRleHR1cmVcclxuICAgIHtcclxuICAgICAgICBsZXQgZnVsbFBhdGggPSBgJHthdGxhc05hbWV9LyR7aW1nTmFtZX1gO1xyXG4gICAgICAgIHJldHVybiBSRVMuZ2V0UmVzQnlGdWxsTmFtZShmdWxsUGF0aCkgYXMgbGF5YS5yZXNvdXJjZS5UZXh0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L295Y2V5Liq6LWE5rqQLOWbvumbhuOAgeWbvueJh+OAgemFjee9ruihqOetiVxyXG4gICAgICogQHBhcmFtIF9yZXNOYW1lIOi1hOa6kOWxgOmDqOi3r+W+hO+8jOS+i+WmgjogYmcucG5nXHJcbiAgICAgKiBAcGFyYW0gX25lZWRNZ3Ig5piv5ZCm5b2S5LqO5Zy65pmv566h55CGXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlcyhfcmVzTmFtZTogc3RyaW5nLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGxldCByZWFsX3BhdGggPSBSRVMuam9pblJlc1BhdGgoX3Jlc05hbWUpO1xyXG4gICAgICAgIGlmICghcmVhbF9wYXRoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZWFsX3BhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L296LWE5rqQ57uEXHJcbiAgICAgKiBAcGFyYW0gX3Jlc0FyciDotYTmupDnu4TmlbDnu4TvvIzmr4/kuKrotYTmupDpg73mmK/lsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcHJvZ3Jhc3NGdW5jIOi/m+W6puWbnuiwg++8jOW4puS4gOS4quWPguaVsO+8iDAtMe+8iVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRHcm91cEFzeW5jKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8Ym9vbGVhbj5cclxuICAgIHtcclxuICAgICAgICBpZiAoIV9yZXNBcnIgfHwgX3Jlc0Fyci5sZW5ndGggPD0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlYWxfcmVzX2FyciA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHJlc19uYW1lIG9mIF9yZXNBcnIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcmVhbF9uYW1lID0gUkVTLmpvaW5SZXNQYXRoKHJlc19uYW1lKTtcclxuICAgICAgICAgICAgcmVhbF9yZXNfYXJyLnB1c2gocmVhbF9uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFJlc0J5RnVsbE5hbWUocmVhbF9yZXNfYXJyLCBfcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vei1hOa6kCzkvb/nlKjlrozmlbTot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcmVzTmFtZSDlrozmlbTotYTmupDot6/lvoTmiJbotYTmupDnu4TlkI1cclxuICAgICAqIEBwYXJhbSBwcm9ncmFzc0Z1bmMg6L+b5bqm5Zue6LCD77yM5bim5LiA5Liq5Y+C5pWw77yIMC0x77yJXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IGFueSwgcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghcmVzRnVsbE5hbWUpIHJldHVybjtcclxuICAgICAgICBsZXQgcHJvZ3Jhc3NIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJsb2FkUmVzRnVsbCBub3JtYWwgJW9cIiwgcmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIGxldCBwcm9ncmVzc19oYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvZ3Jhc3NGdW5jKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlciA9IGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHByb2dyYXNzRnVuYywgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYS5sb2FkZXIubG9hZFxyXG4gICAgICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgcmVzRnVsbE5hbWUsXHJcbiAgICAgICAgICAgICAgICBsYS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCAoX3JlcykgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZy5pbmZvKFRHX1JFUywgXCJsb2FkUmVzRnVsbCBub3JtYWwgb3ZlciAlb1wiLCByZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfcmVzKTtcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbi8qKjNk6LWE5rqQ5Yqg6L295bCB6KOFICovXHJcbmV4cG9ydCBjbGFzcyBSRVNEM1xyXG57XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5saOOAgWxz6LWE5rqQ5ZCN56ew77yM6I635Y+W5a+55bqU55qEQXNzZXRzUmVjb3Jk5paH5Lu26Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gcmVzTmFtZSDlnLrmma/miJbmqKHlnovotYTmupDnmoTlsYDpg6jot6/lvoRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRBc3NldHNSZWNvcmQocmVzTmFtZTogc3RyaW5nKTogc3RyaW5nXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlc0Z1bGxOYW1lID0gUkVTLmpvaW5SZXNQYXRoKHJlc05hbWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2ubGjjgIFsc+i1hOa6kOWQjeensO+8jOiOt+WPluWvueW6lOeahEFzc2V0c1JlY29yZOaWh+S7tui3r+W+hFxyXG4gICAgICogQHBhcmFtIHJlc0Z1bGxOYW1lIOWcuuaZr+aIluaooeWei+i1hOa6kOeahOWujOaVtOi3r+W+hFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWU6IHN0cmluZyk6IHN0cmluZ1xyXG4gICAge1xyXG4gICAgICAgIGxldCBudW0gPSByZXNGdWxsTmFtZS5sYXN0SW5kZXhPZignLycpO1xyXG4gICAgICAgIGxldCBwYXJlbnRGb2xkZXIgPSByZXNGdWxsTmFtZS5zdWJzdHIoMCwgbnVtKTtcclxuICAgICAgICBsZXQgYXNzZXRzUmVjb3JkVXJsID0gYCR7cGFyZW50Rm9sZGVyfS9Bc3NldHNSZWNvcmQuanNvbmA7XHJcbiAgICAgICAgcmV0dXJuIGFzc2V0c1JlY29yZFVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPluafkOS4quW3suWKoOi9vei/h+eahDNk54mp5L2T55qE5YWL6ZqGXHJcbiAgICAgKiBAcGFyYW0gX3Jlc05hbWUg5bGA6YOo6Lev5b6EXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0U3ByaXRlZDNEQ2xvbmUocmVzTmFtZSk6IExheWEuU3ByaXRlM0RcclxuICAgIHtcclxuICAgICAgICBsZXQgc3ByaXRlTW9kZWw6IExheWEuU3ByaXRlM0QgPSBSRVMuZ2V0UmVzKHJlc05hbWUpIGFzIExheWEuU3ByaXRlM0Q7XHJcbiAgICAgICAgcmV0dXJuIHNwcml0ZU1vZGVsLmNsb25lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb0zROi1hOa6kCzkvb/nlKjlrozmlbTot6/lvoRcclxuICAgICAqIEBwYXJhbSByZXNGdWxsTmFtZSDotYTmupDlsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBwcm9ncmFzc0Z1bmMgbG9hZGluZ+WHveaVsFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRSZXMocmVzTmFtZTogc3RyaW5nLCBwcm9ncmFzc0Z1bmM6IEZ1bmN0aW9uID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGxldCByZXNGdWxsTmFtZSA9IFJFUy5nZXRGdWxsUmVzUGF0aChyZXNOYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZXNGdWxsTmFtZSwgcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vTNE6LWE5rqQ57uEXHJcbiAgICAgKiBAcGFyYW0gX3Jlc0FyciDotYTmupDnu4TmlbDnu4TvvIzmiYDmnInotYTmupDpg73mmK/lsYDpg6jot6/lvoRcclxuICAgICAqIEBwYXJhbSBfcHJvZ3Jhc3NGdW5jIOi/m+W6puWbnuiwg++8jOW4puS4gOS4quWPguaVsO+8iDAtMe+8iVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRHcm91cEFzeW5jKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghX3Jlc0FyciB8fCBfcmVzQXJyLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVhbF9yZXNfYXJyID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcmVzX25hbWUgb2YgX3Jlc0FycilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCByZWFsX25hbWUgPSBSRVMuam9pblJlc1BhdGgocmVzX25hbWUpO1xyXG4gICAgICAgICAgICByZWFsX3Jlc19hcnIucHVzaChyZWFsX25hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShyZWFsX3Jlc19hcnIsIF9wcm9ncmFzc0Z1bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yqg6L29M0TotYTmupDnu4RcclxuICAgICAqIEBwYXJhbSBfcmVzQXJyIOi1hOa6kOe7hOaVsOe7hO+8jOaJgOaciei1hOa6kOmDveaYr+WujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIF9wcm9ncmFzc0Z1bmMg6L+b5bqm5Zue6LCD77yM5bim5LiA5Liq5Y+C5pWw77yIMC0x77yJXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZEdyb3VwQXN5bmNCeUZ1bGxOYW1lKF9yZXNBcnI6IHN0cmluZ1tdLCBfcHJvZ3Jhc3NGdW5jID0gbnVsbCk6IFByb21pc2U8YW55PlxyXG4gICAge1xyXG4gICAgICAgIGlmICghX3Jlc0FyciB8fCBfcmVzQXJyLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5sb2FkUmVzQnlGdWxsTmFtZShfcmVzQXJyLCBfcHJvZ3Jhc3NGdW5jKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9vTNE6LWE5rqQLOS9v+eUqOWujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIHJlc0Z1bGxOYW1lIOi1hOa6kOWujOaVtOi3r+W+hFxyXG4gICAgICogQHBhcmFtIHByb2dyYXNzRnVuYyBsb2FkaW5n5Ye95pWwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFJlc0J5RnVsbE5hbWUocmVzRnVsbE5hbWU6IGFueSwgcHJvZ3Jhc3NGdW5jOiBGdW5jdGlvbiA9IG51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCFyZXNGdWxsTmFtZSkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBwcm9ncmFzc0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIGxnLmluZm8oVEdfUkVTLCBcImxvYWRSZXNCeUZ1bGxOYW1lIDNkIGJlZ2luICVvXCIsIHJlc0Z1bGxOYW1lKTtcclxuICAgICAgICBsZXQgcHJvZ3Jlc3NfaGFuZGxlcjogTGF5YS5IYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvZ3Jhc3NGdW5jKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NfaGFuZGxlciA9IGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHByb2dyYXNzRnVuYywgbnVsbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYS5sb2FkZXIuY3JlYXRlXHJcbiAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICByZXNGdWxsTmFtZSxcclxuICAgICAgICAgICAgICAgIGxhLkhhbmRsZXIuY3JlYXRlKHRoaXMsICgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGcuaW5mbyhUR19SRVMsIFwibG9hZFJlc0J5RnVsbE5hbWUgM2Qgb3ZlciAlb1wiLCByZXNGdWxsTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc19oYW5kbGVyXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliqDovb0zROi1hOa6kCzln7rkuo5Bc3NldHNSZWNvcmTliqDovb0s6L+b5bqm5p2h5pu057K+57uGXHJcbiAgICAgKiBAcGFyYW0gcmVzRnVsbE5hbWUg6LWE5rqQ5a6M5pW06Lev5b6EXHJcbiAgICAgKiBAcGFyYW0gcHJvZ3Jhc3NGdW5jIGxvYWRpbmflh73mlbBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkUmVzQnlBc3NldHNSZWNvcmQocmVzRnVsbE5hbWU6IHN0cmluZywgcHJvZ3Jhc3NGdW5jOiBGdW5jdGlvbiA9IG51bGwpXHJcbiAgICB7XHJcbiAgICAgICAgLy8gLiDliqDovb1Bc3NldHNSZWNvcmTmlofku7bvvIzovoPlsI/vvIzkuI3orqHlhaXov5vluqblgLxcclxuICAgICAgICBsZXQgYXJSZXMgPSB0aGlzLmdldEFzc2V0c1JlY29yZEJ5UmVzRnVsbE5hbWUocmVzRnVsbE5hbWUpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFJlc0J5RnVsbE5hbWUoYXJSZXMpO1xyXG4gICAgICAgIGxldCBhckNvbmZpZyA9IFJFUy5nZXRSZXNCeUZ1bGxOYW1lKGFyUmVzKTtcclxuICAgICAgICBpZiAoIWFyQ29uZmlnIHx8IGFyQ29uZmlnLmxlbmd0aCA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAuIOe7hOe7h+imgeWKoOi9veeahOi1hOa6kOaWh+S7tlxyXG4gICAgICAgIGxldCByZXNBcnIgPSBbXTtcclxuICAgICAgICBsZXQgbnVtID0gcmVzRnVsbE5hbWUubGFzdEluZGV4T2YoJy8nKTtcclxuICAgICAgICBsZXQgcGFyZW50Rm9sZGVyID0gcmVzRnVsbE5hbWUuc3Vic3RyKDAsIG51bSkgKyAnLyc7XHJcbiAgICAgICAgZm9yIChsZXQgcmVzIG9mIGFyQ29uZmlnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzQXJyLnB1c2gocGFyZW50Rm9sZGVyICsgcmVzLnVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFJlc0J5RnVsbE5hbWUocmVzQXJyLCBwcm9ncmFzc0Z1bmMpO1xyXG4gICAgICAgIC8vIOacgOWQjuWGjeWKoOi9veW5tuWIm+W7uuiHqui6q++8iGxz44CBbGjvvInvvIzlhbblhoXpg6jotYTmupDlt7Lnu4/lnKjkuIrmlrnliqDovb3lrozkuoZcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRSZXNCeUZ1bGxOYW1lKHJlc0Z1bGxOYW1lKTtcclxuICAgIH1cclxuXHJcbn0iXX0=
